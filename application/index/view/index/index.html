<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>前台收银</title>
		<link rel="stylesheet" href="__STATIC__/index/css/top.css" />
		<link rel="stylesheet" href="__STATIC__/index/css/cashier.css" />
		<link rel="stylesheet" href="__STATIC__/index/css/swiper-3.2.7.min.css" />
		<style type="text/css">
			 .index-top{
                 background-image:url(__STATIC__/index/images/index-top-bg.png);
	         }
	         .NumberPopup .NuIpt{
	         	background-image: url(__STATIC__/index/images/btn-off.png);
	         }
	         .pagination{text-align:center;margin-top:20px;margin-bottom: 20px;}
		    .pagination li{margin:0px 10px; border:1px solid #e6e6e6;padding: 3px 8px;display: inline-block;}
		    .pagination .active{background-color: #009688;;color: #fff;}
		    .pagination .disabled{color:#aaa;}
	        
             /*中间会员按钮*/
             .memberPupop{
				width: 700px;
				height: 500px;
				position: absolute;
				top:6%;
				left: 40%;
				z-index:3;
				border:1px solid white;
				display: none;
				margin: 0 auto;
				background-color: white;
				padding-left: 1%;
				padding-right: 1%;
			}

<<<<<<< .mine
||||||| .r2655
			 @media screen and (max-device-width: 1600px) {
			   .tabgoodsList .tabgoodsListImg{
			    	width: 82px;
			    	height: 82px;
			    }  
			}
			 @media screen and (max-device-width: 1440px) {
			   .tabgoodsList .tabgoodsListImg{
			    	width: 79px;
			    	height: 79px;
			    }  
			}
			 @media screen and (max-device-width: 1280px) {
			   .tabgoodsList .tabgoodsListImg{
			    	width: 65px;
			    	height: 65px;
			    }  
			}
=======

			 @media screen and (max-device-width: 1600px) {
			   .tabgoodsList .tabgoodsListImg{
			    	width: 82px;
			    	height: 82px;
			    }
			}
			 @media screen and (max-device-width: 1440px) {
			   .tabgoodsList .tabgoodsListImg{
			    	width: 79px;
			    	height: 79px;
			    }
			}
			 @media screen and (max-device-width: 1280px) {
			   .tabgoodsList .tabgoodsListImg{
			    	width: 65px;
			    	height: 65px;
			    }
			}
>>>>>>> .r2665
		</style>
	</head>
	<body>
		<!--顶部-->
		<div class="index-top">
			<div class="logo">
				<img src="__STATIC__/index/images/logo.png"/>
			</div>
			<div class="shop-choice">
				<p>鲁能新城店</p>
			</div>
			<div class="other-news">
				<div class="cashRegister">
					<a href="index.html">进入后台</a>
				</div>
				<div class="help">
					<img src="__STATIC__/index/images/help.png" alt="" />
					<a href="#">帮助中心</a>
				</div>
				<div class="fullScreen">
					<img src="__STATIC__/index/images/fullScreen.png" alt="" />
					<a href="#">全屏</a>
				</div>

				<div class="personalInfor">
					<a href="#">
					    <select>
						  <option><a href="#">{$Request.session.indexUser['user_nickname']}</a></option>
						  <option><a href="#">个人信息</a></option>
						  <option><a href="#">修改密码</a></option>
						</select>
					</a>
				</div>

				<div class="closePage">
					<img src="__STATIC__/index/images/Close.png" alt="" />
				</div>
			</div>
		</div>
		<!--顶部结束-->
		<!--主体开始-->
		<div class="content">
			<div class="cashier">
				<div class="cashier1">
					<div class="search">
						<input class="searchInp" id="item_code" type="text" placeholder="条码/商品名"/>
						<img class="searchSearch" src="__STATIC__/index/images/btn-search.png"  alt=""/>
					    <!--<p class="searchP">还差50元 就送XXX</p>-->
					</div>
					<div class="goods">
						
					</div>
					<div class="Settlement">
<<<<<<< .mine
						<p class="settp1">服务人员<b class="settb1">  <select name="">
								<option value="">{$Request.session.indexUser['user_nickname']}(店长)</option>	
||||||| .r2655
						<p class="settp1">服务人员
						<b class="settb1">  
							<select name="">
=======
						<p class="settp1">服务人员
						<b class="settb1">
							<select name="">
>>>>>>> .r2665
								{volist name="workerlist" id="workerlist1"}
									<option value="{$workerlist.id}">{$workerlist1.name}({$workerlist1.type})</option>
								{/volist}
<<<<<<< .mine
																	</select> </b>
||||||| .r2655
							</select> 
						</b>
=======
							</select>
						</b>
>>>>>>> .r2665
						</p>
						<p class="settp2">会员<b class="settb2">余额</b></p>
						<p class="settp3">合计<b class="settb3">￥0.00</b></p>
						<!--<p class="settp4">折扣<b class="settb4">100%</b></p>-->
						<!--<p class="settp5">代金券<b class="settb5">一张可用^</b></p>-->
						<p class="settp6">结算<b class="settb6"><b class="settbb6">已优惠￥5</b>￥888.00</b></p>
						<p class="settp7">选择会员</p>
						<p class="settp8 settpp">结账</p>
					</div>
				</div>

				<div class="cashier2">
					<ul>
						<li class="btnli liii btnliadd">+</li>
						<li class="btnli btnliRed">-</li>
						<li class="btnli btnliNum">数量</li>
						<li class="btnli btnliChangeMoney">改价</li>
						<li class="btnli btnliDelete">删除</li>
						<!--<li class="btnli">充值</li>-->
						<li class="btnli btnliMember">会员</li>
						<!--<li class="btnli">购卡</li>-->
					</ul>
				</div>

				<div class="cashier3">
					<div class="swiper-container tabul swiper1">
						<div class="swiper-wrapper" style="display: flex;">
							<div class="swiper-slide tabli tablli" data-value="-1">所有商品</div>
							<div class="swiper-slide tabli" data-value="-2">服务商品</div>
							{volist name="type_list" id="type_list"}
								<div class="swiper-slide tabli" data-value="{$type_list.id}">{$type_list.cname}</div>
							{/volist}
						</div>	
					</div>
					
					<div class="tabd tabd1">
						<div class="tabbdd" id="item_data">
								{volist name="item_list" id="item_list"}
							<div class="tabgoodsList" data="{$item_list.id}">
								<img src="http://picture.ddxm661.com/{$item_list.pics}" class="tabgoodsListImg" alt="" />
								<div class="tabgoodsList1" data={$item_list.bar_code}>
									<b class="tabgoodsList1b1">{$item_list.title}</b>
									<p class="tabgoodsList1P">
										<p class="tabgoodsList1P1">原<i class="oldPrice">￥{$item_list.price}</i></p>
										<p class="tabgoodsList1P2">
											￥<i class="nowPrice">{$item_list.md_standard_price}</i>
											<b class="tabgoodsList1b2">库存
											<i class="tabNumber">
											{if condition="$item_list['stock'] EGT 100"}
												99+
											{else /}
												{$item_list.stock}
											{/if}
											</i>
											</b>
										</p>
									</p>
								</div>
							</div>
							{/volist}
								
						</div>
					    
					   
					    <div class="page" id='page'>
							{$page|raw}
						</div>
						
					</div>
<<<<<<< .mine
||||||| .r2655
					


					<!-- 
=======



					<!--
>>>>>>> .r2665
					<div class="tabd tabd2">
						
					</div>
					<div class="tabd tabd3">

					</div>
					<div class="tabd tabd4">

					</div>
					<div class="tabd tabd5">

					</div>
					<div class="tabd tabd6">

					</div>
					<div class="tabd tabd7">

					</div>
					<div class="tabd tabd8">

					</div>
<<<<<<< .mine
||||||| .r2655
 					-->
				

=======
 					-->

>>>>>>> .r2665

				</div>
			</div>
		</div>

		<!--透明-->
		<div class="transparent"></div>

		<!--选择会员弹窗-->
		<div class="selectMembers" >
			<p class="closeX">X</p>
			<p class="tittleName">选择会员</p>
			<div class="sMcontent">
				<div class="sMcontent-left">
					<input class="sm-leftInp" oninput = "value=value.replace(/[^\d]/g,'')" type="text" id="vip_mobile" placeholder="输入手机号"/>
					<div class="sm-left"  id="vipInfo">
						<p>会员姓名<b class="sm-left1"></b></p>
						<p>余额<b class="sm-left2"></b></p>
                        <p>会员登记<b class="sm-left3"></b></p>
					</div>
				</div>
				<div class="sMcontent-right">
					<div class="sm-right">
						<p class="sm-rightP">1</p>
						<p class="sm-rightP">2</p>
						<p class="sm-rightP">3</p>
					</div>

					<div class="sm-right">
						<p class="sm-rightP">4</p>
						<p class="sm-rightP">5</p>
						<p class="sm-rightP">6</p>
					</div>

					<div class="sm-right">
						<p class="sm-rightP">7</p>
						<p class="sm-rightP">8</p>
						<p class="sm-rightP">9</p>
					</div>

					<div class="sm-right">
						<p class="sm-rightO">0</p>
						<p class="sm-rightSure" id="selectVip">确定</p>
					</div>
				</div>
			</div>
		</div>

		<!--结算弹窗-->
		<div class="SettleAccounts">
			<p class="SAcloseX">X</p>
			<p class="SAtittleName">结账</p>
			<div class="SA-content">
				<div class="SAC-left">
					<p>应收:<b class="SAC-left1">￥500</b></p>
				    <p>代金券:<b class="SAC-left1">￥20</b></p>
				    <p>改价:<b class="SAC-left1">￥10</b></p>
				    <p>会员:张三<b class="SAC-left1">余额:￥300</b></p>
<<<<<<< .mine
				    <p>服务人员: <select>
				    	           <option value="">{$Request.session.indexUser['user_nickname']}(店长)</option>	
								{volist name="workerlist" id="workerlist1"}
									<option value="{$workerlist.id}">{$workerlist1.name}({$workerlist1.type})</option>	
||||||| .r2655
				    <p>服务人员: <select name="">
								{volist name="workerlist" id="workerlist"}
									<option value="{$workerlist.id}">{$workerlist.name}({$workerlist.type})
									</option>	
=======
				    <p>服务人员: <select name="">
								{volist name="workerlist" id="workerlist"}
									<option value="{$workerlist.id}">{$workerlist.name}({$workerlist.type})
									</option>
>>>>>>> .r2665
								{/volist}
				               </select> 
				    </p>
				</div>
				<div class="SAC-right">
					<div class="SAC-rightD">
						<p class="SAC-rightDP">
							<img src="__STATIC__/index/images/checkout-huiyuanka.png" alt="" />会员卡
						</p>
						<p class="SAC-rightDP">
							<img src="__STATIC__/index/images/checkout-xianjing.png" alt="" />现金
						</p>
					</div>
					<div class="SAC-rightD">
						<p class="SAC-rightDP">
							<img src="__STATIC__/index/images/checkout-weixin.png" alt="" />微信
						</p>
						<p class="SAC-rightDP">
							<img src="__STATIC__/index/images/checkout-zhifubao.png" alt="" />支付宝
						</p>
					</div>
					<div class="SAC-rightD">
						<p class="SAC-rightDP">
							<img src="__STATIC__/index/images/checkout-yinhangka.png" alt="" />银行卡
						</p>
						<p class="SAC-rightDP">
							<img src="__STATIC__/index/images/checkout-meituan.png" alt="" />美团
						</p>
					</div>
					<div class="SAC-rightD">
						<p class="SAC-rightDP">
							<img src="__STATIC__/index/images/checkout-mendian.png" alt="" />赠送
						</p>
						<p class="SAC-rightDP">
							<img src="__STATIC__/index/images/checkout-mendian.png" alt="" />门店自用
						</p>
					</div>

					<div class="SAC-rightDD">
						<p class="SacRightDDP1">取消</p>
						<p class="SacRightDDP2">确定结算</p>
					</div>
				</div>
			</div>
		</div>

		<!--搜索弹窗-->
		<div class="SearchWindow">
			<p class="SWcloseX">X</p>
			<p class="SWtittleName">搜索商品</p>
			<div class="SWinp">
				<!-- <input class="SWinpIpt" type="text" name="" id="" value="" placeholder="请输入你需要查询的商品名字"/> -->
				<input class="SWinpIpt" type="text" name="" id="search_item_title" value="" placeholder="请输入你需要查询的商品名字"/>
				<button class="SWinpBtn" id="search_item">搜索</button>
				<div class="SWtable">
					<select name="" id="type_list" class="SWtableSlt1">
						<option value="">请选择一级分类</option>
						{volist name="type_list1" id="type_list1"}
							<option value="{$type_list1.id}">{$type_list1.cname}</option>
						{/volist}
					</select>
					<select name="" id="type_list2" class="SWtableSlt2">
						<option value="">请选择二级分类</option>
					</select>

					<table class="SWtableTab" cellpadding="0" border="0" cellspacing="0" width="410">
						<thead>
							<tr>
								<th>名称</th>
								<th>类型</th>
								<th>库存</th>
								<th>单价</th>
								<th>操作</th>
							</tr>
						</thead>
						<tbody id="search_item_data">
							<tr>
								<td class="tdName">xxx</td>
								<td class="tdType">xxx</td>
								<td class="tdStock">22</td>
								<td class="tdMoney">￥100:00</td>
								<td class="tdChoice">选择</td>
							</tr>
							<tr>
								<td class="tdName">xxx</td>
								<td class="tdType">xxx</td>
								<td class="tdStock">22</td>
								<td class="tdMoney">￥100:00</td>
								<td class="tdChoice">选择</td>
							</tr>
							<tr>
								<td class="tdName">xxx</td>
								<td class="tdType">xxx</td>
								<td class="tdStock">22</td>
								<td class="tdMoney">￥100:00</td>
								<td class="tdChoice">选择</td>
							</tr>
							<tr>
								<td class="tdName">xxx</td>
								<td class="tdType">xxx</td>
								<td class="tdStock">22</td>
								<td class="tdMoney">￥100:00</td>
								<td class="tdChoice">选择</td>
							</tr>
							<tr>
								<td class="tdName">xxx</td>
								<td class="tdType">xxx</td>
								<td class="tdStock">22</td>
								<td class="tdMoney">￥100:00</td>
								<td class="tdChoice">选择</td>
							</tr>
							<tr>
								<td class="tdName">xxx</td>
								<td class="tdType">xxx</td>
								<td class="tdStock">22</td>
								<td class="tdMoney">￥100:00</td>
								<td class="tdChoice">选择</td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>
<<<<<<< .mine
			
			<!-- <div id="page">					    	
||||||| .r2655

			<!-- 分页 -->
<!-- 			<div id="page">					    	
=======

			<!-- 分页 -->
<!-- 			<div id="page">
>>>>>>> .r2665
			    <ul class="pagination">
					<b class="disabled1"><<</b>
					<b class="disabled1">last</b>
					<li class="disabled1 disabledddd">
					    <a href="#">1</a>
					</li>
					<li class="disabled1">
					    <a href="#">2</a>
					</li>
					<li class="disabled1">
					    <a href="#">3</a>
					</li>
					<li class="disabled1">
					    <a href="#">4</a>
					</li>
					<li class="disabled1">
					    <a href="#">5</a>
					</li>
					<b class="disabled1">>></b>
					<b class="disabled1">fist</b>
			   </ul>
		    </div>	 -->
		    <div class="page" id="page2"></div>	
		</div>
<<<<<<< .mine
		
||||||| .r2655
			
=======

>>>>>>> .r2665
		<!-- 数量弹窗-->
		<div class="NumberPopup NumberPopupP">
			<p class="NucloseX NucloseXX">X</p>
			<p class="NutittleName">修改数量</p>
			<input class="NuIpt" id="itemNumber" oninput="value=value.replace(/[^\d]/g,'')" type="text"/>
			<div class="Nukeyboard">
				<div class="keyboardNum">
					<div class="keyboardNum1">
						<p class="keyboardNum1P">1</p>
						<p class="keyboardNum1P">2</p>
						<p class="keyboardNum1P">3</p>
					</div>
					<div class="keyboardNum1">
						<p class="keyboardNum1P">4</p>
						<p class="keyboardNum1P">5</p>
						<p class="keyboardNum1P">6</p>
					</div>
					<div class="keyboardNum1">
						<p class="keyboardNum1P">7</p>
						<p class="keyboardNum1P">8</p>
						<p class="keyboardNum1P">9</p>
					</div>
					<div class="keyboardNum1">
						<p class="keyboardNum1P keyboardNum0P">0</p>
					</div>
				</div>
				<div class="keyboardSure">
					<p class="keyboardSureP" id="itemNo">确定</p>
				</div>
			</div>
		</div>

		<!-- 修改价格弹窗-->
		<div class="NumberPopup NumberPopupMoney">
			<p class="NucloseX NucloseXMoney">X</p>
			<p class="NutittleName">修改价格</p>
			<input class="NuIpt" onkeyup="value=value.replace(/[^\d\.]/g,'')" onblur="value=value.replace(/[^\d\.]/g,'')" id="saveMoney" type="text"/>
			<div class="Nukeyboard">
				<div class="keyboardNum">
					<div class="keyboardNum1">
						<p class="keyboardNum1P">1</p>
						<p class="keyboardNum1P">2</p>
						<p class="keyboardNum1P">3</p>
					</div>
					<div class="keyboardNum1">
						<p class="keyboardNum1P">4</p>
						<p class="keyboardNum1P">5</p>
						<p class="keyboardNum1P">6</p>
					</div>
					<div class="keyboardNum1">
						<p class="keyboardNum1P">7</p>
						<p class="keyboardNum1P">8</p>
						<p class="keyboardNum1P">9</p>
					</div>
					<div class="keyboardNum1">
						<p class="keyboardNum1P keyboardNum0P">0</p>
					</div>
				</div>
				<div class="keyboardSure">
					<p class="keyboardSureP" id="saveP">确定</p>
				</div>
			</div>
		</div>

		<!--中间按钮会员弹窗-->
		<div class="memberPupop" >
			<p class="closeMemberPupop" >x</p>
			<div class="memberPupopContent" >
				<div class="mpcLeft" >
					<button class="mpcLeftBtn1" >新增会员</button>
					<input type="text" oninput = "value=value.replace(/[^\d]/g,'')" id="vipMobile" placeholder="请输入你需要查询的会员手机号" class="mpcLeftInp"  />
					<button class="mpcLeftBtn2" id="selectVip">查询</button>
					<div class="orderMemberNews" id="vipContent">
						<p class="omnNumber"></p>
						<p class="omnName"></p>
						<p class="omnGrade"></p>
						<p class="omnPrice"><b>累计充值:</b><b>余额:</b></p>
						<p class="omnTime">加入时间:</p>
					</div>
				</div>
				<div class="mpcRight">
					<div class="mpcRight1">
						<p class="mpcRightP">1</p>
						<p class="mpcRightP">2</p>
						<p class="mpcRightP">3</p>
					</div>
					<div class="mpcRight2">
						<p class="mpcRightP">4</p>
						<p class="mpcRightP">5</p>
						<p class="mpcRightP">6</p>
					</div>
					<div class="mpcRight3">
						<p class="mpcRightP">7</p>
						<p class="mpcRightP">8</p>
						<p class="mpcRightP">9</p>
					</div>
					<div class="mpcRight4">
						<p class="mpcRight4P">0</p>
					</div>
				</div>
			</div>
		</div>
		
		<!--新增会员弹窗-->
		<div class="orderAddMember">
			<p class="closeOrderAddMember">x</p>
			<input type="text" placeholder="请输入顾客手机号码" class="coamInp1" oninput = "value=value.replace(/[^\d]/g,'')" id="newVipmobile" />
			<input type="text" placeholder="请输入顾客昵称" class="coamInp2" id="newVipnickname" />
			<button class="coamBtn" id="addVip">确定</button>
		</div>
		
		
		<script src="__STATIC__/index/js/jquery.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="__STATIC__/index/js/swiper-3.4.0.jquery.min.js" type="text/javascript" charset="utf-8"></script>
		<script type="text/javascript">
			$(function(){

				//点击分类刷新商品
				$('.tabli').click(function(){
                    // $('.tabd').hide().eq($(this).index()).show();
                    $('.tabli').eq($(this).index()).addClass("tablli").siblings().removeClass("tablli");
                    var type_id = $(this).attr('data-value');		//一级分类的id 

                    $.ajax({
                    	type:'post',
                    	url :'/index/index/index',
                    	data:{type:type_id},
                    	dataType:'json',
                    	beforeSend:function(){

                    	},
                    	success:function(msg){
                    		if( msg.code == 1 ){
                    			itemData(msg);		//查询成功
                    			
                    		}
                    	}
                    });
                });

                //ajax调用前的优化函数
                function beforeSend(XMLHttpRequest){

                }

                //ajax请求成功之后数据赋值
                function itemData(msg){
                	$('#page').html(msg.page);
                	delete msg.page;
                	delete msg.code;
                	var html = '';

                	for ( var k  in msg ) {
                		html += '<div class="tabgoodsList" data="'+msg[k].id+'">'+
							'<img src="http://picture.ddxm661.com/'+msg[k].pics+'" class="tabgoodsListImg" alt="" />'+
							'<div class="tabgoodsList1" data="'+ msg[k].bar_code +'">'+
								'<b class="tabgoodsList1b1">'+msg[k].title+'</b>'+
								'<p class="tabgoodsList1P">'+
									'<p class="tabgoodsList1P1">原<i class="oldPrice">￥'+msg[k].price+'</i></p>'+
									'<p class="tabgoodsList1P2">￥<i class="nowPrice">'+msg[k].md_standard_price+
										'</i><b class="tabgoodsList1b2">库存<i class="tabNumber">'+msg[k].stock+'</i></b>'+
									'</p>'+
								'</p>'+
							'</div>'+
						'</div>';
                	}
                	$('#item_data').html(html);
                	$('.goodsList').click(function(){              
	                    $('.goodsList').eq($(this).index()).addClass("pii").siblings().removeClass("pii");
	                }); 
                }

                //选择会员
				$('#vip_mobile').bind('input propertychange', function() {
					var mobile = $(this).val();
					if( mobile.length != 11 ){
						return false;
					}
					if( !(/^(((13[0-9]{1})|(15[0-9]{1})|(18[0-9]{1})|(14[0-9]{1})|)+\d{8})$/.test(mobile)) ){
						return false;
					}
					$.ajax({
						type:'post',
                    	url :'/index/index/search_vip',
                    	data:{mobile:mobile},
                    	dataType:'json',
                    	success:function(reg){
							if( reg.code == 1 ){
								var vip = reg.data;
								if( vip ){
									var html = '';
									html = '<p>会员姓名<b class="sm-left1">'+reg.data.nickname+'</b></p>'+
											'<p>余额<b class="sm-left2">￥:'+reg.data.money+'</b></p>'+
		                        			'<p>会员登记<b class="sm-left3">'+reg.data.level_name+'</b></p>';
		                        	$('#vipInfo').html(html);
								}else{
									var html = '<p>会员姓名<b class="sm-left1"></b></p>'+
												'<p>余额<b class="sm-left2"></b></p>'+
                        						'<p>会员登记<b class="sm-left3"></b></p>';
                        			$('#vipInfo').html(html);
								}
							}
						}
					});
				});

				$('#selectVip').click(function(){
					var vipNickname = $('.left1').html();
					var vipMoney = $('sm-left2').html();
					console.log(vipMoney);
				});

				//中间会员按钮的 查询会员
				$('#selectVip').click(function(){
					var mobile = $('#vipMobile').val();
					if( mobile.length != 11 ){
						return false;
					}
					if( !(/^(((13[0-9]{1})|(15[0-9]{1})|(18[0-9]{1})|(14[0-9]{1})|)+\d{8})$/.test(mobile)) ){
						return false;	
					}
					$.ajax({
						type:'post',
                    	url :'/index/index/search_vip',
                    	data:{mobile:mobile},
                    	dataType:'json',
                    	success:function(reg){
							if( reg.code == 1 ){
								var vip = reg.data;
								if( vip ){
									var html = '';
									html = '<p class="omnNumber">'+vip.mobile+'</p>'+
											'<p class="omnName">'+vip.nickname+'</p>'+
											'<p class="omnGrade">'+vip.level_name+'</p>'+
											'<p class="omnPrice"><b>累计充值:'+vip.amount+'</b><b>余额:'+vip.money+'</b></p>'+
											'<p class="omnTime">加入时间:'+vip.regtime+'</p>';
								}else{
									html = '暂无会员信息';
								}

								$('#vipContent').html(html)
							}
						}
					});	
				});


				//实时监听条码搜索
				$('#item_code').bind('input propertychange', function() {
					var item_code = $(this).val();
					// 2300201800008
					if( !(/^[0-9]+$/.test(item_code)) ){
						//不是数字
						return false;
					}

					if( item_code.length !=5 && item_code.length !=6 && item_code.length !=7 && item_code.length !=13 ){
						return false;
					}

					//满足条形码规则，查询数据
					$.ajax({
						type:'post',
                    	url :'/index/index/search_code_item',
                    	data:{bar_code:item_code},
                    	dataType:'json',
                    	success:function(data){
                    		if( data.code == 1 ){
                    			//请求成功
                    			var item = data.data;
                    			if( item ){
                    				var leftAllData = [];
                    				$(".goodsList").each(function(){
				                       var LeftData = $(this).attr('data');
				                       var b = leftAllData.indexOf(LeftData);
				                       if( b == -1 ){
				                       		leftAllData.push(parseInt(LeftData));
				                       }
								    });
								    var a = $.inArray(item.id,leftAllData);	//a=-1表示不在范围内，反正表示在数组的位置
								    var tabNumber = 1;
								    var all_price = item.md_standard_price;
								    if( a == -1 ){
								    	html =  '<div class="goodsList" data="'+item.id+'">'+
				                            '<div class="goodsList-left">'+
												'<p class="left1">'+ item.title + '</p>'+
												'<p class="left2">'+item.bar_code+'</p>'+
												'<b class="left3">￥<i class="left3i">'+ item.md_standard_price + '</i></b>&nbsp;'+
												'<b class="left4">' + item.price + '</b>&nbsp;'+
												'<b class="left5">会员价:￥'+  item.price +'</b>'+
											'</div>'+
											'<div class="goodsList-right">'+
												'<p class="right1">数量 <b class="right1b">' + tabNumber + '</b></p>'+
												'<p class="right2">￥<b class="rightMoney">' + all_price+ '</b></p>'+
											'</div>'+
										'</div>'	
			                         $(".goods").append(html);
			                         $('.goodsList').click(function(){              
					                    $('.goodsList').eq($(this).index()).addClass("pii").siblings().removeClass("pii");
					                 }); 
								    }
                    			}
                    		}
                    	}
					});
				});

<<<<<<< .mine
				//商品搜索框搜索
				$('#search_item').click(function(){
					
                	var search_goods = $('#item_code').val();
                	console.log(search_goods);
                	if( $('#search_item_title').val() == '' ){
                		return false;
                	}
                	
                	$.ajax({
                		type:'post',
                    	// url :'/index/index/search_item_title',
                    	url	: "{:url('search_item_title')}",
                    	data:{type:$('#type_list2').val(),title:$('#search_item_title').val()},
||||||| .r2655
				//点击右边商品跳转到左边
				  var data1 = [];               
                 $('.tabgoodsList').click(function(){                    
                    $('.tabgoodsList').eq($(this).index()).addClass("tabgoodsListt").siblings().removeClass("tabgoodsListt");
                    var goodsname = $('.tabgoodsList .tabgoodsList1b1').html();
                    var oldPrice = $('.tabgoodsList .oldPrice').html();  
                    var nowPrice = $('.tabgoodsList .nowPrice').html();
                    var tabNumber = $('.tabgoodsList .tabNumber').html();
                    var data = $(this).attr('data');
                    var a = data1.indexOf(data);
                    var dataValue = parseInt(data);
                    data1.push(data);
                    $('.goods .goodsList').attr('data1')                                                       
                    console.log(data);
                    console.log(data1);
                    console.log(a);
                    if(a == -1){
                    	 html =  '<div class="goodsList" data="'+data+'">'+
	                            '<div class="goodsList-left">'+
									'<p class="left1">'+ goodsname + '</p>'+
									'<p class="left2">1234567890123431373</p>'+
									'<b class="left3">￥<i class="left3i">'+ nowPrice + '</i></b>&nbsp;'+
									'<b class="left4">' + oldPrice + '</b>&nbsp;'+
									'<b class="left5">会员价:￥216.50</b>'+
								'</div>'+
								'<div class="goodsList-right">'+
									'<p class="right1">数量 <b class="right1b">' + tabNumber + '</b></p>'+
									'<p class="right2">￥<b class="rightMoney">' + nowPrice*tabNumber+ '</b></p>'+
								'</div>'+
							'</div>'	
                     $(".goods").append(html);
                   $('.goodsList').click(function(){              
                    $('.goodsList').eq($(this).index()).addClass("pii").siblings().removeClass("pii");
                });                
                    }
                });
                


  
                $('.btnli').click(function(){
                    
                    $('.btnli').eq($(this).index()).addClass("liii").siblings().removeClass("liii");
                });


                $('.tabli').click(function(){
                    // $('.tabd').hide().eq($(this).index()).show();
                    $('.tabli').eq($(this).index()).addClass("tablli").siblings().removeClass("tablli");
                    var type_id = $(this).attr('data-value');		//一级分类的id 
                    $.ajax({
                    	type:'post',
                    	url :'/index/index/index',
                    	data:{type:type_id},
=======
				//点击右边商品跳转到左边
				  var data1 = [];
                 $('.tabgoodsList').click(function(){
                    $('.tabgoodsList').eq($(this).index()).addClass("tabgoodsListt").siblings().removeClass("tabgoodsListt");
                    var goodsname = $('.tabgoodsList .tabgoodsList1b1').html();
                    var oldPrice = $('.tabgoodsList .oldPrice').html();
                    var nowPrice = $('.tabgoodsList .nowPrice').html();
                    var tabNumber = $('.tabgoodsList .tabNumber').html();
                    var data = $(this).attr('data');
                    var a = data1.indexOf(data);
                    var dataValue = parseInt(data);
                    data1.push(data);
                    $('.goods .goodsList').attr('data1')
                    console.log(data);
                    console.log(data1);
                    console.log(a);
                    if(a == -1){
                    	 html =  '<div class="goodsList" data="'+data+'">'+
	                            '<div class="goodsList-left">'+
									'<p class="left1">'+ goodsname + '</p>'+
									'<p class="left2">1234567890123431373</p>'+
									'<b class="left3">￥<i class="left3i">'+ nowPrice + '</i></b>&nbsp;'+
									'<b class="left4">' + oldPrice + '</b>&nbsp;'+
									'<b class="left5">会员价:￥216.50</b>'+
								'</div>'+
								'<div class="goodsList-right">'+
									'<p class="right1">数量 <b class="right1b">' + tabNumber + '</b></p>'+
									'<p class="right2">￥<b class="rightMoney">' + nowPrice*tabNumber+ '</b></p>'+
								'</div>'+
							'</div>'
                     $(".goods").append(html);
                   $('.goodsList').click(function(){
                    $('.goodsList').eq($(this).index()).addClass("pii").siblings().removeClass("pii");
                });
                    }
                });




                $('.btnli').click(function(){

                    $('.btnli').eq($(this).index()).addClass("liii").siblings().removeClass("liii");
                });


                $('.tabli').click(function(){
                    // $('.tabd').hide().eq($(this).index()).show();
                    $('.tabli').eq($(this).index()).addClass("tablli").siblings().removeClass("tablli");
                    var type_id = $(this).attr('data-value');		//一级分类的id
                    $.ajax({
                    	type:'post',
                    	url :'/index/index/index',
                    	data:{type:type_id},
>>>>>>> .r2665
                    	dataType:'json',
                    	beforeSend:function(){

                    	},
                    	success:function(msg){
                    		if( msg.code == 1 ){
                    			//请求成功
                    			var html = '';
                    			var tt = msg.data;
                    			for( var k in tt ){
                    				html += '<tr>'+
										'<td class="tdName">'+tt[k].title+'</td>'+
										'<td class="tdType">'+tt[k].cname+'</td>'+
										'<td class="tdStock">'+tt[k].stock+'</td>'+
										'<td class="tdMoney">￥'+tt[k].md_standard_price+'</td>'+
										'<td class="tdChoice">选择</td>'+
									'</tr>';
                    			}
                    			$('#page2').html(msg.page);
                    			$('#search_item_data').html(html);
                    		}
                    	}
                	});
                });

				//选择一级分类之后获取二级分类
                $('#type_list').change(function(){
                	var type = $('#type_list').val();
                	$.ajax({
                    	type:'post',
                    	url :'/index/index/getTwotype',
                    	data:{type:type},
                    	dataType:'json',
                    	beforeSend:function(){

                    	},
                    	success:function(msg){
                    		if( msg.code == 1 ){
                    			var html = '';
                    			var das = msg.data;
                    			for ( var k in das  ) {
                    				html += '<option value="'+das[k].id+'">'+das[k].cname+'</option>';
                    			}
                    			$('#type_list2').html(html);
                    		}
                    	}
                    });
                });

                //新增会员
                $('#addVip').click(function(){
                	var mobile = $('#newVipmobile').val();
                	var nickname = $('#newVipnickname').val();
					if( !(/^(((13[0-9]{1})|(15[0-9]{1})|(18[0-9]{1})|(14[0-9]{1})|)+\d{8})$/.test(mobile)) ){
						return false;	
					}
					if( nickname == null ){
						return false;	
					}
					$.ajax({
                    	type:'post',
                    	url :'/index/index/addVip',
                    	data:{mobile:mobile,nickname:nickname},
                    	dataType:'json',
                    	success:function(msg){
                    		if( msg.code == 1 ){
<<<<<<< .mine
                    			$('.transparent').hide();
                    			$('.memberPupop').hide();
                    			$('.orderAddMember').hide();
||||||| .r2655
                    			//请求成功
                    			var html = '';
                    			var tt = msg.data;
                    			for( var k in tt ){
                    				html += '<tr>'+
										'<td class="tdName">'+tt[k].title+'</td>'+
										'<td class="tdType">'+tt[k].cname+'</td>'+
										'<td class="tdStock">'+tt[k].stock+'</td>'+
										'<td class="tdMoney">￥'+tt[k].md_standard_price+'</td>'+
										'<td class="tdChoice">选择</td>'+
									'</tr>';
                    			}
                    			
                    			$('#search_item_data').html(html);
=======
                    			//请求成功
                    			var html = '';
                    			var tt = msg.data;
                    			for( var k in tt ){
                    				html += '<tr>'+
										'<td class="tdName">'+tt[k].title+'</td>'+
										'<td class="tdType">'+tt[k].cname+'</td>'+
										'<td class="tdStock">'+tt[k].stock+'</td>'+
										'<td class="tdMoney">￥'+tt[k].md_standard_price+'</td>'+
										'<td class="tdChoice">选择</td>'+
									'</tr>';
                    			}

                    			$('#search_item_data').html(html);
>>>>>>> .r2665
                    		}
                    	}
                    });
                });

                //修改数量
                $('#itemNo').click(function(){
                	if($('.pii')){                  	
                    	var num = $('#itemNumber').val();		//数量
                    	var price = $('.pii .left3i').html();	//单价
  						$('.pii .right1b').html(num);		//总数
  						$('.pii .rightMoney').html(num*price);
                  	    $('.transparent').hide();
                		$('.NumberPopupP').hide();
                    }else{
                    	$('.transparent').hide();
                		$('.NumberPopupP').hide();	
                    }
                });

                //改价
                $('#saveP').click(function(){
                	if($('.pii')){                  	
                    	var allPrice = $('#saveMoney').val();		//价格
  						$('.pii .rightMoney').html(allPrice);
                  	    $('.transparent').hide();
                		$('.NumberPopupMoney').hide();
                    }else{
                    	$('.transparent').hide();
                		$('.NumberPopupMoney').hide();	
                    }
                });


				
//		中间会员弹窗
				 $('.btnliMember').click(function(){
                    $('.transparent').show();
                    $('.memberPupop').show();
                });
				 $('.closeMemberPupop').click(function(){
                    $('.transparent').hide();
                    $('.memberPupop').hide();
               });
                 $('.mpcLeftBtn1').click(function(){
                    $('.orderAddMember').show();
                });
				 $('.closeOrderAddMember').click(function(){
                    $('.orderAddMember').hide();
                });
//				 中间会员弹窗				
				

                $('.btnli').click(function(){

                    $('.btnli').eq($(this).index()).addClass("liii").siblings().removeClass("liii");
                });   

                 var data1 = [];
                 $('.tabgoodsList').click(function(){       
                   	$(".goodsList").each(function(){
                       var goodsListData = $(this).attr('data');
                       var b = data1.indexOf(goodsListData);
                       if(b == -1){
                       	 data1.push(goodsListData);
                       }
				    });
             
                    $('.tabgoodsList').eq($(this).index()).addClass("tabgoodsListt").siblings().removeClass("tabgoodsListt");
                    var goodsname = $(this).find('.tabgoodsList1b1').html();
                    var oldPrice = $(this).find('.oldPrice').html();  
                    var nowPrice = $(this).find('.nowPrice').html(); 
//                  var tabNumber = $(this).find('.tabNumber').html(); 
                    var tabNumber = 1;                    
                    var data = $(this).attr('data');
                    var a = data1.indexOf(data);
                    var dataValue = parseInt(data);  
                    if(a == -1){
                    	data1.push(data);
                        $('.goods .goodsList').attr('data1');
                    }
                    if(a == -1){ 
                    	 html =  '<div class="goodsList" data="'+data+'">'+
	                            '<div class="goodsList-left">'+
									'<p class="left1">'+ goodsname + '</p>'+
									'<p class="left2">1234567890123431373</p>'+
									'<b class="left3">￥<i class="left3i">'+ nowPrice + '</i></b>&nbsp;'+
									'<b class="left4">' + oldPrice + '</b>&nbsp;'+
									'<b class="left5">会员价:￥216.50</b>'+
								'</div>'+
								'<div class="goodsList-right">'+
									'<p class="right1">数量 <b class="right1b">' + tabNumber + '</b></p>'+
									'<p class="right2">￥<b class="rightMoney">' + nowPrice*tabNumber+ '</b></p>'+
								'</div>'+
							'</div>'	
                         $(".goods").append(html);
                         $('.goodsList').click(function(){              
		                    $('.goodsList').eq($(this).index()).addClass("pii").siblings().removeClass("pii");
		                 }); 
                    }
                });
<<<<<<< .mine


       //          $('.tabgoodsList').click(function(){
       //          	var a = $('.right1b').html();
       //          	var a1 = parseInt(a);
       //          	var num = a1+1;
       //          	$('.right1b').html(num);
       //          	var b = $('.left3i').html();
       //          	var nowPrice = parseInt(b);
       //          	var money = num*nowPrice;
       //          	$('.rightMoney').html(money);
       //          	var tabNumber = $(this).find('.tabNumber').html();
       //          	var tabNumber1 = parseInt(tabNumber);
       //          	var numAll = tabNumber1-1;
       //          	$(this).find('.tabNumber').html(numAll);
       //          	if(numAll == 0){                   		
       //              		var r=confirm("是否删除当前商品")
							// if (r==true){
							// 	$(".tabgoodsListt").remove();
							// }else{	
							// }
       //        		   }
       //          });

                
||||||| .r2655
                
=======

>>>>>>> .r2665
                

                
                $('.settb5').click(function(){
                	$('.transparent').show();
                });

//              选择会员
                $('.settp7').click(function(){
                	$(this).addClass("settpp");
                	$('.settp8').removeClass("settpp");
                	$('.transparent').show();
                	$('.selectMembers').show();
                });
                $('.closeX').click(function(){
                	$('.transparent').hide();
                	$('.selectMembers').hide();
                });
//               结算
                $('.settp8').click(function(){
                	$(this).addClass("settpp");
                	$('.settp7').removeClass("settpp");
                	$('.transparent').show();
                	$('.SettleAccounts').show();
                });
                 $('.SAcloseX').click(function(){
                	$('.transparent').hide();
                	$('.SettleAccounts').hide();
                });


//              搜索框
                $('.searchSearch').click(function(){
                	$('.transparent').show();
                	$('.SearchWindow').show();
                	$('#search_item_title').val($('#item_code').val());
                });
                $('.SWcloseX').click(function(){
                	$('.transparent').hide();
                	$('.SearchWindow').hide();
                });

//             数量按钮
                $('.btnliNum').click(function(){
                	$('.transparent').show();
                	$('.NumberPopupP').show();
                });

                $('.NucloseXX').click(function(){
                	$('.transparent').hide();
                	$('.NumberPopupP').hide();
                });


//              改价按钮
                $('.btnliChangeMoney').click(function(){
                	$('.transparent').show();
                	$('.NumberPopupMoney').show();
                });
                $('.NucloseXMoney').click(function(){
                	$('.transparent').hide();
                	$('.NumberPopupMoney').hide();
                });

//              删除按钮
                $('.btnliDelete').click(function(){
	             	 //    var Piidata = $('.pii').attr('data');
	             	 //    var P = data1.indexOf(Piidata);
	             		// $('.pii').remove();
                        var Piidata = $('.pii').attr('data');
                        console.log(Piidata);
                        var P1 = data1.indexOf(Piidata);
                        console.log(P1);
                        if(P1 != -1){
                        	data1.splice(P1,1);
                        	$('.pii').remove();
                        }
                        console.log(data1);
                	});

//               加
                $('.btnliadd').click(function(){
                	if($('.pii')){
                    	var num = $('.pii .right1b').html();
                    	var NumB = parseInt(num)+1;

                  	    $('.pii .right1b').html(NumB);
                  	    var price = $('.pii .left3i').html();
                  	    var Nprice = price*100/100;

                  	    var nub = (NumB*Nprice).toFixed(2);
                  	    $('.pii .rightMoney').html(nub);
                    }
                });
//              减1
                $('.btnliRed').click(function(){
                	  if($('.pii')){
                    	var num = $('.pii .right1b').html();

                    	if(num>1){
                    		$('.pii .right1b').html(parseInt(num)-1);
                    		var price = $('.pii .left3i').html();
                    		var priceall = $('.pii .rightMoney').html();
	                  	    priceall = (priceall-price).toFixed(2);


	                  	     $('.pii .rightMoney').html(priceall)
                    	}else if(num == 1){

                    		var r=confirm("是否删除当前商品")
							if (r==true){
								var piidata = $('.pii').attr('data');
		                        var p1 = data1.indexOf(piidata);
		                        if(p1 != -1){
		                        	data1.splice(p1,1);
		                        }							
								$(".pii").remove();

							}else{

							}
              		   }
                    }
                });

                $('.goodsList').click(function(){              
                    $('.goodsList').eq($(this).index()).addClass("pii").siblings().removeClass("pii");
                 }); 



//               分页点击改变背景色
                $('.disabled').click(function(){
                    $('.disabled').eq($(this).index()).addClass("disabledddd").siblings().removeClass("disabledddd");
                });

                 $('.disabled1').click(function(){
                    $('.disabled1').eq($(this).index()).addClass("disabledddd").siblings().removeClass("disabledddd");
                });
<<<<<<< .mine

                
||||||| .r2655
                
=======

>>>>>>> .r2665
//              swiper
                var swiper1 = new Swiper('.swiper1', {
					slidesPerView: 8,
					paginationClickable: true,//此参数设置为true时，点击分页器的指示点分页器会控制Swiper切换。
					spaceBetween: 10,//slide之间的距离（单位px）。
					freeMode: true,//默认为false，普通模式：slide滑动时只滑动一格，并自动贴合wrapper，设置为true则变为free模式，slide会根据惯性滑动且不会贴合。
					loop: false,//是否可循环
					onTab: function(swiper) {
						var n = swiper1.clickedIndex;
					}
				});

            });
<<<<<<< .mine
            
||||||| .r2655
            
            
            
=======




>>>>>>> .r2665
            $(window).resize(function (){

			 var whdef = 100/1920;        <!--表示1920的设计图,使用100PX的默认值-->
			 var wH = window.innerHeight; <!--当前窗口的高度-->
			 var wW = window.innerWidth;  <!--当前窗口的宽度-->
			 var rem = wW * whdef;        <!--以默认比例值乘以当前窗口宽度,得到该宽度下的相应FONT-SIZE值-->
			 $('html').css('font-size', rem + "px");
			});
		</script>
	</body>
</html>
