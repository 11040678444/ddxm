(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-987af39a"],{"3bf2":function(e,t,a){"use strict";function l(e){return l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}a.d(t,"a",(function(){return l}))},"756b":function(e,t,a){},"797c":function(e,t,a){"use strict";var l=a("756b"),i=a.n(l);i.a},b9c2:function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"a",(function(){return o})),a.d(t,"c",(function(){return r})),a.d(t,"d",(function(){return s}));var l=a("b775");function i(e){return Object(l["a"])({url:"/mall_admin_market/Coupon/get_list",method:"post",data:e})}function o(e){return Object(l["a"])({url:"/mall_admin_market/Coupon/coupon_doPost",method:"post",data:e})}function r(e){return Object(l["a"])({url:"/mall_admin_market/Coupon/coupon_delete",method:"post",data:e})}function s(e){return Object(l["a"])({url:"/mall_admin_market/Coupon/coupon_info",method:"post",data:e})}},d1ce:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-card",{staticClass:"box-card",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",staticStyle:{"line-height":"32px"},attrs:{slot:"header"},slot:"header"},[a("span",[e._v("优惠券管理")])]),e._v(" "),a("div",{staticClass:"app-container"},[a("div",{staticClass:"app-head"},[a("div",{staticClass:"ipt"},[a("el-input",{attrs:{size:"small",placeholder:"优惠券名称"},model:{value:e.requestData.c_name,callback:function(t){e.$set(e.requestData,"c_name",t)},expression:"requestData.c_name"}},[a("template",{slot:"prepend"},[e._v("优惠券名称")])],2)],1),e._v(" "),a("div",{staticClass:"ipt"},[a("div",{staticClass:"iptTitle"},[e._v("类型")]),e._v(" "),a("el-select",{attrs:{clearable:"",placeholder:"优惠券类型",size:"small"},model:{value:e.requestData.c_type,callback:function(t){e.$set(e.requestData,"c_type",t)},expression:"requestData.c_type"}},[a("el-option",{attrs:{label:"满减优惠券",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"折扣优惠券",value:"2"}})],1)],1),e._v(" "),a("div",{staticClass:"ipt"},[a("div",{staticClass:"iptTitle"},[e._v("是否显示")]),e._v(" "),a("el-select",{attrs:{clearable:"",placeholder:"请选择是否显示",size:"small"},model:{value:e.requestData.c_is_show,callback:function(t){e.$set(e.requestData,"c_is_show",t)},expression:"requestData.c_is_show"}},[a("el-option",{attrs:{label:"不显示",value:"0"}}),e._v(" "),a("el-option",{attrs:{label:"显示",value:"1"}})],1)],1),e._v(" "),a("div",[a("el-button",{attrs:{size:"small",icon:"el-icon-search",type:"primary"},on:{click:e.search}},[e._v("搜索")])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":"","empty-text":"暂无数据","header-cell-style":{backgroundColor:"#F5F7FA"},"header-row-style":{height:"30px"}}},[a("el-table-column",{attrs:{property:"id",label:"ID",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{property:"c_type_name",label:"类型",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{property:"c_name",label:"优惠券名称",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{property:"c_provide_num_name",label:"发放总量",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{property:"receive_num",label:"领取数量",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{property:"all_c_provide_num",label:"剩余量",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{label:"适用商品",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.c_use_scene?a("el-button",{attrs:{size:"mini",type:"primary"}},[e._v("全部商品可用")]):e._e(),e._v(" "),1==t.row.c_use_scene?a("el-button",{attrs:{size:"mini",type:"warning"},on:{click:function(a){return e.watch(t.row.id,t.row.c_use_scene)}}},[e._v("指定商品可用")]):e._e(),e._v(" "),2==t.row.c_use_scene?a("el-button",{attrs:{size:"mini",type:"warning"},on:{click:function(a){return e.watch(t.row.id,t.row.c_use_scene)}}},[e._v("指定商品不可用")]):e._e(),e._v(" "),3==t.row.c_use_scene?a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){return e.watch(t.row.id,t.row.c_use_scene)}}},[e._v("指定品牌可用")]):e._e(),e._v(" "),4==t.row.c_use_scene?a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){return e.watch(t.row.id,t.row.c_use_scene)}}},[e._v("指定品牌不可用")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{property:"c_use_price_name",label:"适用价格",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{property:"c_use_time_name",label:"用券时间",width:"300"}}),e._v(" "),a("el-table-column",{attrs:{property:"c_use_cill_name",label:"使用门槛(元)",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{property:"c_amo_dis_name",label:"优惠内容(满减/%)",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{property:"c_is_show_name",label:"是否显示",width:"233"}}),e._v(" "),a("el-table-column",{attrs:{property:"c_content",label:"优惠券内容",width:"233"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"233",fixed:"right",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.detail(t.row.id)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.del(t.row.id)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[5,10,15,20],"page-size":100,layout:" sizes, prev, pager, next, total, jumper",total:e.count},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:e.tit,visible:e.watchVisible},on:{"update:visible":function(t){e.watchVisible=t}}},[a("el-table",{attrs:{data:e.gridData,border:""}},[a("el-table-column",{attrs:{property:"id",label:"ID",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{property:"title",label:"商品"}})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"编辑优惠券",visible:e.handelVisible},on:{"update:visible":function(t){e.handelVisible=t}}},[a("el-card",[a("div",{staticClass:"my-form"},[a("el-form",{attrs:{model:e.formData,"label-width":"auto"}},[a("el-form-item",{attrs:{label:"优惠券类型"}},[a("el-radio-group",{model:{value:e.formData.c_type,callback:function(t){e.$set(e.formData,"c_type",t)},expression:"formData.c_type"}},[a("el-radio",{attrs:{label:1}},[e._v("满减优惠券")]),e._v(" "),a("el-radio",{attrs:{label:2}},[e._v("折扣优惠券")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"优惠券名称",prop:"c_name"}},[a("el-input",{staticClass:"my-input",model:{value:e.formData.c_name,callback:function(t){e.$set(e.formData,"c_name",t)},expression:"formData.c_name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"发放总量",prop:"c_provide_num"}},[a("el-input",{staticClass:"my-input",attrs:{placeholder:"请输入内容"},model:{value:e.formData.c_provide_num,callback:function(t){e.$set(e.formData,"c_provide_num",t)},expression:"formData.c_provide_num"}},[a("template",{slot:"append"},[e._v("张")])],2)],1),e._v(" "),a("el-form-item",{attrs:{label:"适用商品"}},[a("el-radio-group",{model:{value:e.formData.c_use_scene,callback:function(t){e.$set(e.formData,"c_use_scene",t)},expression:"formData.c_use_scene"}},[a("el-radio",{attrs:{label:0}},[e._v("全部商品可使用")]),e._v(" "),a("el-radio",{attrs:{label:1}},[e._v("指定商品可使用")]),e._v(" "),a("el-radio",{attrs:{label:2}},[e._v("指定商品不可使用")]),e._v(" "),a("el-radio",{attrs:{label:3}},[e._v("指定品牌可使用")]),e._v(" "),a("el-radio",{attrs:{label:4}},[e._v("指定品牌不可使用")])],1)],1),e._v(" "),1==e.formData.c_use_scene||2==e.formData.c_use_scene?a("el-form-item",{attrs:{label:"选择商品"}},[a("el-button",{attrs:{type:"text"},on:{click:function(t){e.show=!0}}},[e._v("\n              点击\n              "),0==e.choooeseData.length?a("span",[e._v("选择")]):a("span",[e._v("查看")]),e._v("商品\n            ")])],1):e._e(),e._v(" "),3==e.formData.c_use_scene||4==e.formData.c_use_scene?a("el-form-item",{attrs:{label:"选择品牌"}},[a("el-button",{attrs:{type:"text"},on:{click:function(t){e.brand=!0}}},[e._v("点击选择品牌")])],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"适用价格"}},[a("el-radio-group",{model:{value:e.formData.c_use_price,callback:function(t){e.$set(e.formData,"c_use_price",t)},expression:"formData.c_use_price"}},[a("el-radio",{attrs:{label:1,size:"medium"}},[e._v("原价使用")]),e._v(" "),a("el-radio",{attrs:{label:2,size:"medium"}},[e._v("会员价使用")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"优惠内容",prop:"c_amo_dis"}},[1==e.formData.c_type?a("el-input",{staticClass:"my-input",model:{value:e.formData.c_amo_dis,callback:function(t){e.$set(e.formData,"c_amo_dis",e._n(t))},expression:"formData.c_amo_dis"}},[a("template",{slot:"prepend"},[e._v("减免")]),e._v(" "),a("template",{slot:"append"},[e._v("元")])],2):e._e(),e._v(" "),2==e.formData.c_type?a("el-input",{staticClass:"my-input",model:{value:e.formData.c_amo_dis,callback:function(t){e.$set(e.formData,"c_amo_dis",t)},expression:"formData.c_amo_dis"}},[a("template",{slot:"append"},[e._v("%")])],2):e._e()],1),e._v(" "),a("el-form-item",{attrs:{label:"使用门槛",prop:"c_use_cill"}},[a("el-radio-group",{model:{value:e.formData.c_use_cill,callback:function(t){e.$set(e.formData,"c_use_cill",t)},expression:"formData.c_use_cill"}},[a("el-radio",{attrs:{label:0,border:"",size:"medium"}},[e._v("无使用门槛")]),e._v(" "),a("el-radio",{attrs:{label:1}},[a("el-input",{staticClass:"my-input",attrs:{disabled:0==e.formData.c_use_cill},model:{value:e.doorMoney,callback:function(t){e.doorMoney=t},expression:"doorMoney"}},[a("template",{slot:"prepend"},[e._v("订单满")]),e._v(" "),a("template",{slot:"append"},[e._v("元")])],2)],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"每人领取次数",prop:"c_receive_num"}},[a("el-radio-group",{model:{value:e.formData.c_receive_num,callback:function(t){e.$set(e.formData,"c_receive_num",t)},expression:"formData.c_receive_num"}},[a("el-radio",{attrs:{label:0,border:"",size:"medium"}},[e._v("无限制")]),e._v(" "),a("el-radio",{attrs:{label:1}},[a("el-input",{staticClass:"my-input",attrs:{disabled:0==e.formData.c_receive_num},model:{value:e.pickUp,callback:function(t){e.pickUp=t},expression:"pickUp"}},[a("template",{slot:"prepend"},[e._v("每人限领")]),e._v(" "),a("template",{slot:"append"},[e._v("张")])],2)],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"用券时间",prop:"c_use_time"}},[a("el-radio-group",{model:{value:e.formData.c_use_time,callback:function(t){e.$set(e.formData,"c_use_time",t)},expression:"formData.c_use_time"}},[a("el-radio",{attrs:{label:0,size:"medium"}},[a("el-date-picker",{attrs:{size:"small",type:"daterange",placeholder:"选择日期","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",format:"yyyy 年 MM 月 dd 日","value-format":"timestamp"},model:{value:e.time,callback:function(t){e.time=t},expression:"time"}})],1),e._v(" "),a("el-radio",{attrs:{label:1}},[a("el-input",{staticClass:"my-input",attrs:{disabled:0==e.formData.c_use_time},model:{value:e.day,callback:function(t){e.day=t},expression:"day"}},[a("template",{slot:"prepend"},[e._v("领取后")]),e._v(" "),a("template",{slot:"append"},[e._v("天可用")])],2)],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"开始时间"}},[a("el-radio-group",{model:{value:e.formData.c_start_time,callback:function(t){e.$set(e.formData,"c_start_time",t)},expression:"formData.c_start_time"}},[a("el-radio",{attrs:{label:0,size:"medium"}},[e._v("即刻生效")]),e._v(" "),a("el-radio",{attrs:{label:1,size:"medium"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间","value-format":"timestamp",disabled:0==e.formData.c_start_time},model:{value:e.time2,callback:function(t){e.time2=t},expression:"time2"}})],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"是否显示"}},[a("el-radio-group",{model:{value:e.formData.c_is_show,callback:function(t){e.$set(e.formData,"c_is_show",t)},expression:"formData.c_is_show"}},[a("el-radio",{attrs:{label:0,size:"medium"}},[e._v("不显示")]),e._v(" "),a("el-radio",{attrs:{label:1,size:"medium"}},[e._v("显示")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"使用说明",prop:"c_content"}},[a("el-input",{staticStyle:{"max-width":"500px"},attrs:{type:"textarea",clearable:"",placeholder:"请输入使用说明!"},model:{value:e.formData.c_content,callback:function(t){e.$set(e.formData,"c_content",t)},expression:"formData.c_content"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("确定保存")]),e._v(" "),a("el-button",[e._v("取消")])],1)],1)],1)])],1)],1)},i=[],o=a("3bf2"),r=a("b9c2"),s={data:function(){return{listLoading:!1,currentPage:1,count:null,watchVisible:!1,handelVisible:!1,tit:null,requestData:{page:1,limit:5,c_name:null,c_is_show:null,c_type:null},formData:{},doorMoney:null,pickUp:null,day:null,time:null,time2:null,list:[],gridData:[]}},created:function(){this._getData()},inject:["reload"],methods:{_getData:function(){var e=this;this.listLoading=!0,Object(r["b"])(this.requestData).then((function(t){console.log(t),200==t.code&&(e.list=t.data,e.count=t.count,e.listLoading=!1)}))},detail:function(e){var t=this;this.handelVisible=!0,Object(r["d"])({id:e}).then((function(e){if(200==e.code){var a=e.data;0!=a.c_use_cill&&(t.doorMoney=a.c_use_cill,a.c_use_cill=1),0!=a.c_receive_num&&(t.pickUp=a.c_receive_num,a.c_receive_num=1),"object"==Object(o["a"])(a.c_use_time)?(t.time=[1e3*a.c_use_time.start_time,1e3*a.c_use_time.end_time],a.c_use_time=0):(t.day=a.c_use_times,a.c_use_time=1),0!=a.c_start_time&&(t.time2=1e3*a.c_start_time,a.c_start_time=1),t.formData=a,console.log(t.formData)}}))},watch:function(e,t){var a=this;1==t?this.tit="指定商品可用":2==t?this.tit="指定商品不可用":3==t?this.tit="指定品牌可用":4==t&&(this.tit="指定品牌不可用"),Object(r["d"])({id:e}).then((function(e){console.log(e),200==e.code&&(a.gridData=e.data.cus_scene_id,a.watchVisible=!0)}))},del:function(e){var t=this;this.$confirm("此操作将删除优惠券, 是否继续?","提醒",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then((function(){var a={id:e};Object(r["c"])(a).then((function(e){200==e.code&&(t.$message({type:"success",message:"删除成功"}),t.reload())}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},search:function(){this._getData()},submit:function(){console.log(this.formData),Object(r["a"])(this.formData).then((function(e){console.log(e)}))},handleSizeChange:function(e){this.requestData.limit=e,this._getData()},handleCurrentChange:function(e){this.requestData.page=e,this._getData()}}},n=s,c=(a("797c"),a("5511")),_=Object(c["a"])(n,l,i,!1,null,"46629e6e",null);t["default"]=_.exports}}]);