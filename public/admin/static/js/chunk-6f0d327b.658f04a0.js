(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6f0d327b"],{1:function(t,e){},"163d":function(t,e,a){"use strict";var n=a("e7ad"),i=a("e042"),r=a("75c4"),s=a("1e5b"),o=a("94b3"),l=a("238a"),c=a("2ea2").f,u=a("dcb7").f,p=a("064e").f,d=a("777a").trim,h="Number",f=n[h],m=f,_=f.prototype,b=r(a("e005")(_))==h,v="trim"in String.prototype,g=function(t){var e=o(t,!1);if("string"==typeof e&&e.length>2){e=v?e.trim():d(e,3);var a,n,i,r=e.charCodeAt(0);if(43===r||45===r){if(a=e.charCodeAt(2),88===a||120===a)return NaN}else if(48===r){switch(e.charCodeAt(1)){case 66:case 98:n=2,i=49;break;case 79:case 111:n=8,i=55;break;default:return+e}for(var s,l=e.slice(2),c=0,u=l.length;c<u;c++)if(s=l.charCodeAt(c),s<48||s>i)return NaN;return parseInt(l,n)}}return+e};if(!f(" 0o1")||!f("0b1")||f("+0x1")){f=function(t){var e=arguments.length<1?0:t,a=this;return a instanceof f&&(b?l((function(){_.valueOf.call(a)})):r(a)!=h)?s(new m(g(e)),a,f):g(e)};for(var D,y=a("149f")?c(m):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),w=0;y.length>w;w++)i(m,D=y[w])&&!i(f,D)&&p(f,D,u(m,D));f.prototype=_,_.constructor=f,a("bf16")(n,h,f)}},"1e5b":function(t,e,a){var n=a("fb68"),i=a("859b").set;t.exports=function(t,e,a){var r,s=e.constructor;return s!==a&&"function"==typeof s&&(r=s.prototype)!==a.prototype&&n(r)&&i&&i(t,r),t}},2:function(t,e){},2934:function(t,e,a){"use strict";a.d(e,"d",(function(){return i})),a.d(e,"b",(function(){return r})),a.d(e,"f",(function(){return s})),a.d(e,"e",(function(){return o})),a.d(e,"c",(function(){return l})),a.d(e,"a",(function(){return c})),a.d(e,"g",(function(){return u}));var n=a("b775");function i(t){return Object(n["a"])({url:"/stock/Base/search_item",method:"post",data:t})}function r(t){return Object(n["a"])({url:"/common/Brand/get_list",method:"post",data:t})}function s(t){return Object(n["a"])({url:"/stock/Shop/get_list",method:"get",params:t})}function o(){return Object(n["a"])({url:"/stock/supplier/getAllList",method:"post"})}function l(t){return Object(n["a"])({url:"/stock/Shop/get_list",method:"post",data:t})}function c(){return Object(n["a"])({baseURL:"http://192.168.25.104",url:"/common/item_company/getItemCompany",method:"post"})}function u(){return Object(n["a"])({baseURL:"http://192.168.25.104",url:"/common/shop/getShop",method:"post"})}},3:function(t,e){},"3fc4":function(t,e,a){"use strict";var n=a("e054"),i=a.n(n);i.a},"777a":function(t,e,a){var n=a("e46b"),i=a("f6b4"),r=a("238a"),s=a("9769"),o="["+s+"]",l="​",c=RegExp("^"+o+o+"*"),u=RegExp(o+o+"*$"),p=function(t,e,a){var i={},o=r((function(){return!!s[t]()||l[t]()!=l})),c=i[t]=o?e(d):s[t];a&&(i[a]=c),n(n.P+n.F*o,"String",i)},d=p.trim=function(t,e){return t=String(i(t)),1&e&&(t=t.replace(c,"")),2&e&&(t=t.replace(u,"")),t};t.exports=p},"7eaf":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-card",{staticClass:"box-card",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",staticStyle:{"line-height":"32px"},attrs:{slot:"header"},slot:"header"},[a("span",[t._v("直接入库单")]),t._v(" "),a("el-button",{staticStyle:{float:"right"},attrs:{size:"small",type:"success"}},[t._v("导出")])],1),t._v(" "),a("div",{staticClass:"app-container"},[a("div",{staticClass:"insert"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){t.dialogTableVisible=!0}}},[t._v("直接入库")])],1),t._v(" "),a("div",{staticClass:"app-head"},[a("div",{staticClass:"ipt"},[a("div",{staticClass:"iptTitle"},[t._v("所入仓库")]),t._v(" "),a("el-select",{attrs:{clearable:"",placeholder:"请选择所入仓库",size:"small"},model:{value:t.reqData.shop_id,callback:function(e){t.$set(t.reqData,"shop_id",e)},expression:"reqData.shop_id"}},t._l(t.wareHouse,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),t._v(" "),a("div",{staticClass:"ipt"},[a("div",{staticClass:"iptTitle"},[t._v("供应商")]),t._v(" "),a("el-select",{attrs:{clearable:"",placeholder:"请选择选择供应商",size:"small"},model:{value:t.reqData.supplier_id,callback:function(e){t.$set(t.reqData,"supplier_id",e)},expression:"reqData.supplier_id"}},t._l(t.supplier,(function(t){return a("el-option",{key:t.id,attrs:{label:t.supplier_name,value:t.id}})})),1)],1),t._v(" "),a("div",{staticClass:"ipt"},[a("div",{staticClass:"iptTitle"},[t._v("选择状态")]),t._v(" "),a("el-select",{attrs:{clearable:"",placeholder:"请选择状态",size:"small"},model:{value:t.reqData.transfer,callback:function(e){t.$set(t.reqData,"transfer",e)},expression:"reqData.transfer"}},t._l(t.status,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),t._v(" "),a("div",{staticClass:"ipt"},[a("div",{staticClass:"iptTitle"},[t._v("订单单号")]),t._v(" "),a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入订单单号/商品名称",clearable:"",size:"small"},model:{value:t.reqData.name,callback:function(e){t.$set(t.reqData,"name",e)},expression:"reqData.name"}})],1),t._v(" "),a("div",{staticClass:"ipt"},[a("el-date-picker",{attrs:{size:"small",type:"datetimerange",placeholder:"选择日期","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"timestamp"},model:{value:t.time1,callback:function(e){t.time1=e},expression:"time1"}})],1),t._v(" "),a("div",[a("el-button",{attrs:{size:"small",icon:"el-icon-search",type:"primary"},on:{click:t.search}},[t._v("搜索")]),t._v(" "),a("el-button",{attrs:{size:"small",icon:"el-icon-refresh",type:"warning"},on:{click:t.reset}},[t._v("重置")])],1)]),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],attrs:{data:t.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":"","empty-text":"暂无数据","header-cell-style":{backgroundColor:"#F5F7FA"},"header-row-style":{height:"30px"}}},[a("el-table-column",{attrs:{property:"id",label:"ID",width:"50",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"采购信息",width:"233"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v("订单号:"+t._s(e.row.sn))]),t._v(" "),a("p",[t._v("供货商:"+t._s(e.row.supplier_name))]),t._v(" "),a("p",[t._v("采购人:"+t._s(e.row.user_name))]),t._v(" "),a("p",[t._v("入库时间:"+t._s(e.row.create_time))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"商品信息","min-width":"450"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.item_list.item_name,(function(e,n){return a("p",{key:n},[t._v("("+t._s(n+1)+") "+t._s(e))])}))}}])}),t._v(" "),a("el-table-column",{attrs:{label:"规格",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.item_list.item_attr_name,(function(e,n){return a("p",{key:n},[t._v(t._s(e))])}))}}])}),t._v(" "),a("el-table-column",{attrs:{label:"条形码",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.item_list.item_bar_code,(function(e,n){return a("p",{key:n},[t._v("("+t._s(n+1)+") "+t._s(e))])}))}}])}),t._v(" "),a("el-table-column",{attrs:{property:"shop_name",label:"所入仓库",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{label:"入库单价",width:"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.item_list.item_price,(function(e,n){return a("p",{key:n},[t._v(t._s(e))])}))}}])}),t._v(" "),a("el-table-column",{attrs:{label:"入库量",width:"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.item_list.item_num,(function(e,n){return a("p",{key:n},[t._v(t._s(e))])}))}}])}),t._v(" "),a("el-table-column",{attrs:{label:"合计金额",width:"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.item_list.item_all_price,(function(e,n){return a("p",{key:n},[t._v(t._s(e))])}))}}])}),t._v(" "),a("el-table-column",{attrs:{label:"转账",width:"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.transfer?a("el-tag",{attrs:{type:"success"}},[t._v(t._s(e.row.transfer_amount))]):a("el-tag",{attrs:{type:"danger"}},[t._v("未转账")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"200",align:"center",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.transfer?a("el-tag",{attrs:{type:"info"}},[t._v("无")]):a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return t.open(e.row.id)}}},[t._v("转账")])]}}])})],1),t._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":this.reqData.page,"page-sizes":[5,10,15,20],"page-size":100,layout:" sizes, prev, pager, next, total, jumper",total:t.count1},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"直接入库",visible:t.dialogTableVisible,"show-close":"",width:"60%"},on:{"update:visible":function(e){t.dialogTableVisible=e},close:t.closeDialog}},[a("el-card",{staticClass:"box-card",attrs:{shadow:"hover"}},[a("div",{staticStyle:{"margin-bottom":"10px"}},[a("el-select",{staticStyle:{"margin-right":"15px"},attrs:{clearable:"",placeholder:"请选择供货商",size:"small"},model:{value:t.insertData.supplier_id,callback:function(e){t.$set(t.insertData,"supplier_id",e)},expression:"insertData.supplier_id"}},t._l(t.supplier,(function(t){return a("el-option",{key:t.id,attrs:{label:t.supplier_name,value:t.id}})})),1),t._v(" "),a("el-select",{attrs:{clearable:"",placeholder:"请选择仓库",size:"small"},model:{value:t.insertData.shop_id,callback:function(e){t.$set(t.insertData,"shop_id",e)},expression:"insertData.shop_id"}},t._l(t.wareHouse,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1),t._v(" "),a("el-button",{attrs:{type:"text"},on:{click:t.test}},[t._v("点击此处添加新商品")])],1),t._v(" "),a("el-table",{attrs:{data:t.chooeseData,border:"","header-cell-style":{backgroundColor:"#F5F7FA"},"element-loading-text":"Loading",stripe:""}},[a("el-table-column",{attrs:{property:"id",label:"序号",width:"80",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{property:"title",label:"商品名称",width:"200",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{property:"specification.key_name",label:"规格",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{property:"specification.bar_code",label:"条纹码",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"数量",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("input",{directives:[{name:"model",rawName:"v-model",value:t.chooeseData[e.$index].num,expression:"chooeseData[props.$index].num"}],staticClass:"input",attrs:{placeholder:"请输入数量"},domProps:{value:t.chooeseData[e.$index].num},on:{input:[function(a){a.target.composing||t.$set(t.chooeseData[e.$index],"num",a.target.value)},function(a){return t.handleTotal(e.$index)}]}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"入库单价",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("input",{directives:[{name:"model",rawName:"v-model",value:t.chooeseData[e.$index].price,expression:"chooeseData[props.$index].price"}],staticClass:"input",attrs:{placeholder:"请输入单价"},domProps:{value:t.chooeseData[e.$index].price},on:{input:[function(a){a.target.composing||t.$set(t.chooeseData[e.$index],"price",a.target.value)},function(a){return t.handleTotal(e.$index)}]}})]}}])}),t._v(" "),a("el-table-column",{attrs:{property:"total",label:"合计金额",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{property:"address",label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(a){return t.delShop(e.$index)}}})]}}])})],1),t._v(" "),a("div",{staticClass:"total"},[t._v("\n        合计成本\n        "),a("span",{staticClass:"money"},[t._v(t._s(t.sub))]),t._v(" 元\n      ")]),t._v(" "),a("div",{staticStyle:{"margin-top":"20px"}},[t._v("\n        备注：\n        "),a("el-input",{staticClass:"bz",attrs:{size:"small"},model:{value:t.insertData.remarks,callback:function(e){t.$set(t.insertData,"remarks",e)},expression:"insertData.remarks"}}),t._v(" "),a("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",size:"small"},on:{click:t.submit}},[t._v("立即提交")])],1)],1),t._v(" "),a("ChoosesGoods",{attrs:{isShow:t.innerVisible,chooeseArr:t.chooeseId},on:{"update:isShow":function(e){t.innerVisible=e},"update:is-show":function(e){t.innerVisible=e},submit:t.chooeseOver}})],1),t._v(" "),a("el-dialog",{attrs:{title:"确认转账",visible:t.transferVisible,width:"30%",top:"30vh"},on:{"update:visible":function(e){t.transferVisible=e}}},[a("el-card",{staticClass:"box-card",attrs:{shadow:"hover",size:"small"}},[a("el-form",{ref:"transferData",attrs:{model:t.transferData,rules:t.formRules}},[a("el-form-item",{staticStyle:{width:"400px"},attrs:{label:"转账金额",prop:"amount",clearable:""}},[a("el-input",{staticStyle:{width:"400px"},attrs:{placeholder:"请输入转账金额",clearable:""},model:{value:t.transferData.amount,callback:function(e){t.$set(t.transferData,"amount",t._n(e))},expression:"transferData.amount"}},[a("template",{slot:"prepend"},[t._v("转账金额")])],2)],1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.closeMoney}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.comfimMoney}},[t._v("确 定")])],1)],1)],1)},i=[],r=a("0bbb"),s=(a("6d57"),a("63ff"),a("57f0")),o=(a("163d"),a("f573")),l=a("2934"),c=a("e926"),u=(a("ecc0"),a("2f51"),{data:function(){return{list:null,listLoading:!1,dialogTableVisible:!1,innerVisible:!1,transferVisible:!1,sub:0,formRules:{amount:[{required:!0,message:"请输入金额!"},{type:"number",message:"金额必须是数字!"}]},reqData:{page:1,limit:5,name:null,supplier_id:null,shop_id:null,transfer:null,start_time:null,end_time:null},transferData:{id:null,amount:null},insertData:{remarks:null,shop_id:null,supplier_id:null,item:[]},count1:null,time1:null,wareHouse:[],supplier:[],status:[{id:1,name:"转账"},{id:0,name:"未转账"}],chooeseData:[],chooeseId:[]}},created:function(){this.reqData.page=Number(sessionStorage.getItem("pagination"))||1,this._getList(),this._getWare(),this._getSupplier()},watch:{innerVisible:function(){0==this.innerVisible&&(this.chooeseId=[])},time1:function(){null==this.time1&&(this.reqData.start_time=null,this.reqData.end_time=null)}},inject:["reload"],components:{ChoosesGoods:c["a"]},beforeUpdate:function(){sessionStorage.setItem("pagination",this.reqData.page)},methods:{_getList:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.listLoading=!0,t.next=3,Object(o["h"])(this.reqData).then((function(t){200==t.code&&(e.list=t.data,console.log("数据",e.list),e.count1=t.count,e.listLoading=!1)}));case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),_getWare:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(l["f"])().then((function(t){200==t.code&&(e.wareHouse=t.data)}));case 2:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}(),_getSupplier:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(l["e"])().then((function(t){200==t.code&&(e.supplier=t.data)}));case 2:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}(),_addWare:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(o["b"])(this.insertData).then((function(t){console.log(t),200==t.code&&(e.dialogTableVisible=!1,e.reload())}));case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),closeMoney:function(){this.transferVisible=!1,this.transferData.amount=null},open:function(t){this.transferVisible=!0,this.transferData.id=t},comfimMoney:function(){var t=this;null==this.transferData.amount?this.$message.error("转账金额不能为空!"):"number"!=typeof this.transferData.amount?(console.log(1),this.$message.error("转账金额必须是数字!")):Object(o["g"])(this.transferData).then((function(e){200==e.code&&(t.$message({message:e.msg,type:"success"}),t.transferVisible=!1,t.reload())}))},handelData:function(){var t=!1;if(this.chooeseData.forEach((function(e){null==e.total&&(t=!0)})),null==this.insertData.supplier_id)this.$message.error("供应商不能为空!");else if(null==this.insertData.shop_id)this.$message.error("仓库不能为空!");else if(t)this.$message.error("请输入数量或单价!");else{var e=[];this.chooeseData.forEach((function(t){var a={item_id:t.id,item_name:t.title,num:t.num,price:t.price,bar_code:t.specification.bar_code,attr_ids:t.specification.key,attr_name:t.specification.key_name};e.push(a)})),this.insertData.item=e,console.log("处理过后的数组",this.insertData)}},submit:function(){this.handelData(),this._addWare()},chooeseOver:function(t){var e;t.forEach((function(t){t.num=null,t.price=null,t.total=null})),(e=this.chooeseData).push.apply(e,Object(r["a"])(t)),console.log("选中商品",this.chooeseData)},delShop:function(t){this.chooeseData.splice(t,1)},reset:function(){this.reqData={name:null,supplier_id:null,shop_id:null,transfer:null,start_time:null,end_time:null}},handleTotal:function(t){var e=this;this.$nextTick((function(){var a=0,n=0;e.chooeseData.forEach((function(t){a+=t.num*t.price})),n=e.chooeseData[t].num*e.chooeseData[t].price,a!=e.total&&(e.sub=a,e.chooeseData[t].total=n)}))},search:function(){null!==this.time1&&(this.reqData.start_time=this.time1[0]/1e3,this.reqData.end_time=this.time1[1]/1e3),this._getList()},handleSizeChange:function(t){this.reqData.limit=t,this._getList()},handleCurrentChange:function(t){this.reqData.page=t,this._getList()},closeDialog:function(){this.chooeseData=[],this.insertData={remarks:null,shop_id:null,supplier_id:null,item:[]}},test:function(){var t=this;this.innerVisible=!0,0!=this.chooeseData.length&&(console.log(this.chooeseData),this.chooeseData.forEach((function(e){t.chooeseId.push(e.id)}))),console.log("选择商品ID",this.chooeseId)}}}),p=u,d=(a("3fc4"),a("5511")),h=Object(d["a"])(p,n,i,!1,null,"97af0a26",null);e["default"]=h.exports},"859b":function(t,e,a){var n=a("fb68"),i=a("69b3"),r=function(t,e){if(i(t),!n(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,n){try{n=a("4ce5")(Function.call,a("dcb7").f(Object.prototype,"__proto__").set,2),n(t,[]),e=!(t instanceof Array)}catch(i){e=!0}return function(t,a){return r(t,a),e?t.__proto__=a:n(t,a),t}}({},!1):void 0),check:r}},9769:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},b8a4:function(t,e,a){"use strict";var n=a("d836"),i=a.n(n);i.a},d836:function(t,e,a){},e054:function(t,e,a){},e926:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-dialog",{attrs:{width:"55%",title:"商品选择",visible:t.show,"append-to-body":""},on:{"update:visible":function(e){t.show=e},close:t.closeDialog}},[a("el-card",{staticClass:"box-card",attrs:{shadow:"hover"}},[a("div",{staticClass:"search-box"},[a("el-input",{staticClass:"search-input with",attrs:{clearable:"",size:"small",placeholder:"商品名称"},model:{value:t.requestData.item_name,callback:function(e){t.$set(t.requestData,"item_name",e)},expression:"requestData.item_name"}}),t._v(" "),a("el-input",{staticClass:"search-input with",attrs:{clearable:"",size:"small",placeholder:"条形码"},model:{value:t.requestData.bar_code,callback:function(e){t.$set(t.requestData,"bar_code",e)},expression:"requestData.bar_code"}}),t._v(" "),a("el-radio-group",{staticStyle:{"margin-right":"20px"},model:{value:t.requestData.item_type,callback:function(e){t.$set(t.requestData,"item_type",e)},expression:"requestData.item_type"}},[a("el-radio",{attrs:{label:1,size:"medium"}},[t._v("线上商品")]),t._v(" "),a("el-radio",{attrs:{label:2,size:"medium",disabled:t.isDisabled}},[t._v("门店商品")])],1),t._v(" "),a("el-button",{staticClass:"search-input",attrs:{size:"small",icon:"el-icon-search",type:"primary"},on:{click:t.search}},[t._v("搜索")])],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.requestData.isLoad,expression:"requestData.isLoad"}],ref:"multipleTable",attrs:{data:t.responseData,border:"","header-cell-style":{backgroundColor:"#F5F7FA"},"element-loading-text":"Loading",stripe:"","max-height":"400","span-method":t.objectSpanMethod},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{label:"ID",align:"center",prop:"id"}}),t._v(" "),a("el-table-column",{attrs:{label:"商品名称",align:"center",prop:"title"}}),t._v(" "),a("el-table-column",{attrs:{label:"规格",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.specification.key_name))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"条形码",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.specification.bar_code))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"库存",align:"center",prop:"stock"}})],1),t._v(" "),a("div",{staticClass:"footer"},[a("el-pagination",{attrs:{"current-page":t.requestData.page,"page-sizes":[5,10,15,20],"page-size":t.requestData.limit,layout:"total, sizes, prev, pager, next, jumper",total:t.totalCount,"hide-on-single-page":!0},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),a("el-button",{staticStyle:{float:"right",margin:"20px"},attrs:{type:"primary",size:"small"},on:{click:t.submit}},[t._v("确定")])],1)],1)],1)},i=[],r=(a("6d57"),a("0bbb")),s=(a("63ff"),a("57f0")),o=a("2934"),l={name:"ChoosesGoods",props:{isShow:{type:Boolean,default:!1},chooeseArr:{type:Array,default:function(){return[]}},isDisabled:{type:Boolean,default:!1}},watch:{isShow:{immediate:!0,handler:function(t){console.log("我是父组件带过来的值",t),console.log("选中ID数组",this.chooeseArr),this.show=t,this.requestData.not_ids=this.chooeseArr}},show:function(t,e){t||this.$emit("update:isShow",!1)}},data:function(){return{show:!1,isLoad:!1,requestData:{page:1,limit:5,item_type:1,item_name:"",brand_id:"",bar_code:"",shop_id:"",stock:"",not_ids:[]},multipleSelection:[],spanArr:[],position:0,totalCount:0,responseData:[]}},created:function(){},methods:{closeDialog:function(){this.show=!1,this.responseData=[],this.requestData={page:1,limit:5,item_type:1,item_name:"",brand_id:"",bar_code:"",shop_id:"",stock:"",not_ids:[]}},search:function(){this.requestData.page=1,this.loadData()},handleCurrentChange:function(t){this.requestData.page=t,this.loadData()},handleSizeChange:function(t){this.requestData.limit=t,this.loadData()},loadData:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.totalCount=0,this.responseData=[],this.spanArr=[],this.position=0,this.isLoad=!0,t.next=7,Object(o["d"])(this.requestData).then((function(t){if(200===t.code){e.totalCount=t.count;var a=[],n=[];t.data.map((function(t){n=[],t.specs.map((function(e){n.push(Object.assign({specification:e},t))})),a.push.apply(a,Object(r["a"])(n))})),e.responseData=a,e.rowspan(),console.log("处理数据结构后：",a)}e.isLoad=!1})).catch((function(t){e.isLoad=!1,console.log(t)}));case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),rowspan:function(){var t=this;this.responseData.forEach((function(e,a){0===a?(t.spanArr.push(1),t.position=0):t.responseData[a].id===t.responseData[a-1].id?(t.spanArr[t.position]+=1,t.spanArr.push(0)):(t.spanArr.push(1),t.position=a)}))},objectSpanMethod:function(t){t.row,t.column;var e=t.rowIndex,a=t.columnIndex;if(1===a){var n=this.spanArr[e],i=n>0?1:0;return{rowspan:n,colspan:i}}if(2===a){var r=this.spanArr[e],s=r>0?1:0;return{rowspan:r,colspan:s}}},handleSelectionChange:function(t){this.multipleSelection=t,console.log(t)},submit:function(){this.$emit("submit",this.multipleSelection),this.show=!1,this.responseData=[]}}},c=l,u=(a("b8a4"),a("5511")),p=Object(u["a"])(c,n,i,!1,null,"e6a9457e",null);e["a"]=p.exports},f573:function(t,e,a){"use strict";a.d(e,"e",(function(){return i})),a.d(e,"c",(function(){return r})),a.d(e,"i",(function(){return s})),a.d(e,"f",(function(){return o})),a.d(e,"d",(function(){return l})),a.d(e,"a",(function(){return c})),a.d(e,"h",(function(){return u})),a.d(e,"g",(function(){return p})),a.d(e,"b",(function(){return d}));var n=a("b775");function i(t){return Object(n["a"])({url:"/stock/purchase/getList",method:"get",params:t})}function r(t){return Object(n["a"])({url:"/stock/Purchase/purchase_close",method:"get",params:t})}function s(t){return Object(n["a"])({url:"/stock/Purchase/store_item",method:"get",params:t})}function o(t){return Object(n["a"])({url:"/stock/Purchase/refund_storage",method:"get",params:t})}function l(t){return Object(n["a"])({url:"/stock/Purchase/findId",method:"post",data:t})}function c(t){return Object(n["a"])({url:"/stock/Purchase/storage_item",method:"post",data:t})}function u(t){return Object(n["a"])({url:"/stock/PurDeliver/get_list",method:"post",data:t})}function p(t){return Object(n["a"])({url:"/stock/PurDeliver/transfer",method:"post",data:t})}function d(t){return Object(n["a"])({url:"/stock/PurDeliver/add",method:"post",data:t})}}}]);