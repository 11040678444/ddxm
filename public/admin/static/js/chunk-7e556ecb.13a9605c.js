(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7e556ecb"],{1:function(t,e){},"190b":function(t,e,a){a("149f")&&"g"!=/./g.flags&&a("064e").f(RegExp.prototype,"flags",{configurable:!0,get:a("f1fe")})},"1eba":function(t,e,a){},2:function(t,e){},2934:function(t,e,a){"use strict";a.d(e,"d",(function(){return s})),a.d(e,"b",(function(){return i})),a.d(e,"f",(function(){return r})),a.d(e,"e",(function(){return o})),a.d(e,"c",(function(){return l})),a.d(e,"a",(function(){return c})),a.d(e,"g",(function(){return u}));var n=a("b775");function s(t){return Object(n["a"])({url:"/stock/Base/search_item",method:"post",data:t})}function i(t){return Object(n["a"])({url:"/common/Brand/get_list",method:"post",data:t})}function r(t){return Object(n["a"])({url:"/stock/Shop/get_list",method:"get",params:t})}function o(){return Object(n["a"])({url:"/stock/supplier/getAllList",method:"post"})}function l(t){return Object(n["a"])({url:"/stock/Shop/get_list",method:"post",data:t})}function c(){return Object(n["a"])({baseURL:"http://192.168.25.104",url:"/common/item_company/getItemCompany",method:"post"})}function u(){return Object(n["a"])({baseURL:"http://192.168.25.104",url:"/common/shop/getShop",method:"post"})}},"2b45":function(t,e,a){"use strict";a("190b");var n=a("69b3"),s=a("f1fe"),i=a("149f"),r="toString",o=/./[r],l=function(t){a("bf16")(RegExp.prototype,r,t,!0)};a("238a")((function(){return"/a/b"!=o.call({source:"a",flags:"b"})}))?l((function(){var t=n(this);return"/".concat(t.source,"/","flags"in t?t.flags:!i&&t instanceof RegExp?s.call(t):void 0)})):o.name!=r&&l((function(){return o.call(this)}))},3:function(t,e){},"3bf2":function(t,e,a){"use strict";function n(t){return n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}a.d(e,"a",(function(){return n}))},"3e3d":function(t,e,a){"use strict";var n=a("ddad"),s=a.n(n);s.a},"70da":function(t,e,a){"use strict";var n=a("e46b"),s=a("e6f5"),i=a("6bf0"),r=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(i);n(n.P+n.F*r,"String",{padStart:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0,!0)}})},"9a33":function(t,e,a){"use strict";var n=a("2fd4"),s=a("69b3"),i=a("f63e"),r=a("e754"),o=a("eafa"),l=a("7108"),c=a("8714"),u=a("238a"),d=Math.min,p=[].push,h="split",_="length",f="lastIndex",v=4294967295,m=!u((function(){RegExp(v,"y")}));a("0aed")("split",2,(function(t,e,a,u){var b;return b="c"=="abbc"[h](/(b)*/)[1]||4!="test"[h](/(?:)/,-1)[_]||2!="ab"[h](/(?:ab)*/)[_]||4!="."[h](/(.?)(.?)/)[_]||"."[h](/()()/)[_]>1||""[h](/.?/)[_]?function(t,e){var s=String(this);if(void 0===t&&0===e)return[];if(!n(t))return a.call(s,t,e);var i,r,o,l=[],u=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),d=0,h=void 0===e?v:e>>>0,m=new RegExp(t.source,u+"g");while(i=c.call(m,s)){if(r=m[f],r>d&&(l.push(s.slice(d,i.index)),i[_]>1&&i.index<s[_]&&p.apply(l,i.slice(1)),o=i[0][_],d=r,l[_]>=h))break;m[f]===i.index&&m[f]++}return d===s[_]?!o&&m.test("")||l.push(""):l.push(s.slice(d)),l[_]>h?l.slice(0,h):l}:"0"[h](void 0,0)[_]?function(t,e){return void 0===t&&0===e?[]:a.call(this,t,e)}:a,[function(a,n){var s=t(this),i=void 0==a?void 0:a[e];return void 0!==i?i.call(a,s,n):b.call(String(s),a,n)},function(t,e){var n=u(b,t,this,e,b!==a);if(n.done)return n.value;var c=s(t),p=String(this),h=i(c,RegExp),_=c.unicode,f=(c.ignoreCase?"i":"")+(c.multiline?"m":"")+(c.unicode?"u":"")+(m?"y":"g"),g=new h(m?c:"^(?:"+c.source+")",f),y=void 0===e?v:e>>>0;if(0===y)return[];if(0===p.length)return null===l(g,p)?[p]:[];var w=0,k=0,S=[];while(k<p.length){g.lastIndex=m?k:0;var C,x=l(g,m?p:p.slice(k));if(null===x||(C=d(o(g.lastIndex+(m?0:k)),p.length))===w)k=r(p,k,_);else{if(S.push(p.slice(w,k)),S.length===y)return S;for(var j=1;j<=x.length-1;j++)if(S.push(x[j]),S.length===y)return S;k=w=C}}return S.push(p.slice(w)),S}]}))},b8a4:function(t,e,a){"use strict";var n=a("d836"),s=a.n(n);s.a},c134:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-card",{staticClass:"box-card",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",staticStyle:{"line-height":"32px"},attrs:{slot:"header"},slot:"header"},[a("span",[t._v("采购单")]),t._v(" "),a("el-button",{staticStyle:{float:"right"},attrs:{size:"small",type:"success"}},[t._v("导出")])],1),t._v(" "),a("div",{staticClass:"app-container"},[a("div",{staticClass:"insert"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){t.dialogTableVisible=!0}}},[t._v("新增采购")])],1),t._v(" "),a("div",{staticClass:"app-head"},[a("div",{staticClass:"ipt"},[a("div",{staticClass:"iptTitle"},[t._v("供应商")]),t._v(" "),a("el-select",{attrs:{clearable:"",placeholder:"请选择选择供应商",size:"small"},model:{value:t.value1,callback:function(e){t.value1=e},expression:"value1"}},t._l(t.supplier,(function(t){return a("el-option",{key:t.value,attrs:{label:t.supplier_name,value:t.id}})})),1)],1),t._v(" "),a("div",{staticClass:"ipt"},[a("div",{staticClass:"iptTitle"},[t._v("选择状态")]),t._v(" "),a("el-select",{attrs:{clearable:"",placeholder:"请选择状态",size:"small"},model:{value:t.value1,callback:function(e){t.value1=e},expression:"value1"}},t._l(t.supplier,(function(t){return a("el-option",{key:t.value,attrs:{label:t.supplier_name,value:t.id}})})),1)],1),t._v(" "),a("div",{staticClass:"ipt"},[a("el-date-picker",{attrs:{size:"small",type:"daterange",placeholder:"选择日期","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",format:"yyyy 年 MM 月 dd 日","value-format":"timestamp"},model:{value:t.time1,callback:function(e){t.time1=e},expression:"time1"}})],1),t._v(" "),a("div",{staticClass:"ipt"},[a("div",{staticClass:"iptTitle"},[t._v("订单单号")]),t._v(" "),a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入订单单号",clearable:"",size:"small"}})],1),t._v(" "),a("div",[a("el-button",{attrs:{size:"small",icon:"el-icon-search",type:"primary"},on:{click:t.search}},[t._v("搜索")]),t._v(" "),a("el-button",{attrs:{size:"small",icon:"el-icon-refresh",type:"warning"},on:{click:t.test}},[t._v("重置")])],1)]),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],attrs:{data:t.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":"","empty-text":"暂无数据","header-cell-style":{backgroundColor:"#F5F7FA"},"header-row-style":{height:"30px"}}},[a("el-table-column",{attrs:{label:"采购信息",width:"233"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v("订单号:"+t._s(e.row.sn))]),t._v(" "),a("p",[t._v("供货商:"+t._s(e.row.supplier_name))]),t._v(" "),a("p",[t._v("采购人:"+t._s(e.row.purchase_admin_name))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"商品信息","min-width":"300"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.item_name,(function(e,n){return a("p",{key:n},[t._v("("+t._s(n+1)+") "+t._s(e))])}))}}])}),t._v(" "),a("el-table-column",{attrs:{label:"规格",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.attr_name,(function(e,n){return a("p",{key:n},[t._v(t._s(e))])}))}}])}),t._v(" "),a("el-table-column",{attrs:{label:"条形码",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.item_code,(function(e,n){return a("p",{key:n},[t._v(t._s(e))])}))}}])}),t._v(" "),a("el-table-column",{attrs:{label:"采购单价",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.cg_amount,(function(e,n){return a("p",{key:n},[t._v(t._s(e))])}))}}])}),t._v(" "),a("el-table-column",{attrs:{label:"采购量",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.num,(function(e,n){return a("p",{key:n},[t._v(t._s(e))])}))}}])}),t._v(" "),a("el-table-column",{attrs:{label:"已入量",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.y_num,(function(e,n){return a("p",{key:n},[t._v(t._s(e))])}))}}])}),t._v(" "),a("el-table-column",{attrs:{label:"合计金额",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.amount,(function(e,n){return a("p",{key:n},[t._v("￥"+t._s(e))])}))}}])}),t._v(" "),a("el-table-column",{attrs:{label:"状态",width:"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.status?a("el-tag",[t._v("采购中")]):t._e(),t._v(" "),2==e.row.status?a("el-tag",{attrs:{type:"warning"}},[t._v("入库中")]):t._e(),t._v(" "),3==e.row.status?a("el-tag",{attrs:{type:"success"}},[t._v("已入库")]):t._e(),t._v(" "),4==e.row.status?a("el-tag",{attrs:{type:"info"}},[t._v("已关闭")]):t._e(),t._v(" "),5==e.row.status?a("el-tag",{attrs:{type:"success"}},[t._v("反入库")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"90",align:"center",fixed:"right","class-name":"purcaseBtn"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.status?a("el-button",{attrs:{size:"mini",type:"info"}},[t._v("编辑")]):t._e(),t._v(" "),1==e.row.status?a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return t.remind(e.row.id,2)}}},[t._v("删除")]):t._e(),t._v(" "),1==e.row.status||2==e.row.status?a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return t.warehouse(e.row.id)}}},[t._v("入库")]):t._e(),t._v(" "),1!==e.row.status?a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return t.handleRecording(e.row.id)}}},[t._v("入库记录")]):t._e(),t._v(" "),3==e.row.status?a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return t.remind(e.row.id,3)}}},[t._v("反入库")]):t._e(),t._v(" "),2==e.row.status?a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return t.remind(e.row.id,1)}}},[t._v("关闭")]):t._e()]}}])})],1),t._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[5,10,15,20],"page-size":100,layout:" sizes, prev, pager, next, total, jumper",total:t.count1},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"新增采购",visible:t.dialogTableVisible,"show-close":"",width:"60%"},on:{"update:visible":function(e){t.dialogTableVisible=e},close:t.insertClose}},[a("el-card",{staticClass:"box-card",attrs:{shadow:"hover"}},[a("div",{staticStyle:{"margin-bottom":"10px"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择供货商",size:"small"},model:{value:t.value1,callback:function(e){t.value1=e},expression:"value1"}},t._l(t.supplier,(function(t){return a("el-option",{key:t.value,attrs:{label:t.supplier_name,value:t.id}})})),1),t._v(" "),a("el-button",{attrs:{type:"text"},on:{click:t.insert}},[t._v("点击此处添加新商品")])],1),t._v(" "),a("el-table",{attrs:{data:t.chooseShop,border:"","header-cell-style":{backgroundColor:"#F5F7FA"},"element-loading-text":"Loading"}},[a("el-table-column",{attrs:{label:"序号",width:"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(e.row.id))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"商品名称",width:"200",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(e.row.title))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"规格",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.specs,(function(e,n){return a("p",{key:n},[t._v(t._s(e.key_name))])}))}}])}),t._v(" "),a("el-table-column",{attrs:{label:"条纹码",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(e.row.bar_code))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"数量",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("input",{directives:[{name:"model",rawName:"v-model",value:t.chooseShop[e.$index].num,expression:"chooseShop[props.$index].num"}],staticClass:"input",attrs:{placeholder:"请输入数量"},domProps:{value:t.chooseShop[e.$index].num},on:{input:[function(a){a.target.composing||t.$set(t.chooseShop[e.$index],"num",a.target.value)},function(a){return t.handleTotal(e.$index)}]}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"采购单价",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("input",{directives:[{name:"model",rawName:"v-model",value:e.row.price,expression:"props.row.price"}],staticClass:"input",attrs:{placeholder:"请输入价格"},domProps:{value:e.row.price},on:{input:[function(a){a.target.composing||t.$set(e.row,"price",a.target.value)},function(a){return t.handleTotal(e.$index)}]}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"合计金额",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.total))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"备注",align:"center"}},[a("el-input",{attrs:{placeholder:"请输入备注",clearable:""},model:{value:t.remark,callback:function(e){t.remark=e},expression:"remark"}})],1),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(a){return t.delShop(e.$index)}}})]}}])})],1),t._v(" "),a("div",{staticClass:"total"},[t._v("\n        合计成本\n        "),a("span",{staticClass:"money"},[t._v(t._s(t.sub))]),t._v(" 元\n      ")]),t._v(" "),a("div",{staticStyle:{"margin-top":"20px"}},[t._v("\n        备注：\n        "),a("el-input",{staticClass:"bz",attrs:{size:"small"}}),t._v(" "),a("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",size:"small"},on:{click:t.submit}},[t._v("立即提交")])],1)],1),t._v(" "),a("chooses-goods",{attrs:{isShow:t.innerVisible},on:{"update:isShow":function(e){t.innerVisible=e},"update:is-show":function(e){t.innerVisible=e}}})],1),t._v(" "),a("el-dialog",{attrs:{title:"入库记录",visible:t.shopVisible,"show-close":""},on:{"update:visible":function(e){t.shopVisible=e}}},[a("el-card",{staticClass:"box-card",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("采购信息")])]),t._v(" "),a("div",{staticClass:"info"},[a("p",[a("span",{staticClass:"title"},[t._v("采购单号")]),t._v("\n          "+t._s(t.record.sn)+"\n        ")]),t._v(" "),a("p",[a("span",{staticClass:"title"},[t._v("供应商")]),t._v("\n          "+t._s(t.record.supplier_name)+"\n        ")]),t._v(" "),a("p",[a("span",{staticClass:"title"},[t._v("采购人")]),t._v("\n          "+t._s(t.record.purchase_admin_name)+"\n        ")]),t._v(" "),a("p",[a("span",{staticClass:"title"},[t._v("采购时间")]),t._v("\n          "+t._s(t.record.create_time)+"\n        ")]),t._v(" "),a("p",[a("span",{staticClass:"title"},[t._v("备注")]),t._v("\n          "+t._s(t.record.remark)+"\n        ")])])]),t._v(" "),a("el-card",{staticClass:"box-card",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("采购清单")])]),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],attrs:{data:t.purchaseList,border:"","header-cell-style":{backgroundColor:"#F5F7FA"},"element-loading-text":"Loading",stripe:""}},[a("el-table-column",{attrs:{property:"date",label:"序号",width:"50",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(e.row.purchase_item_id))])]}}])}),t._v(" "),a("el-table-column",{attrs:{property:"name",label:"商品名称",width:"250",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(e.row.item_name))])]}}])}),t._v(" "),a("el-table-column",{attrs:{property:"address",label:"采购数量",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(e.row.num))])]}}])}),t._v(" "),a("el-table-column",{attrs:{property:"address",label:"入库数量",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(e.row.y_num))])]}}])}),t._v(" "),a("el-table-column",{attrs:{property:"address",label:"剩余数量",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(e.row.num))])]}}])})],1)],1),t._v(" "),a("el-card",{staticClass:"box-card",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("入库记录")])]),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],attrs:{data:t.warehouseList,border:"","header-cell-style":{backgroundColor:"#F5F7FA"},"element-loading-text":"Loading",stripe:""}},[a("el-table-column",{attrs:{property:"date",label:"序号",width:"50",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(e.row.id))])]}}])}),t._v(" "),a("el-table-column",{attrs:{property:"name",label:"仓库名称",width:"250",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(e.row.shop_name))])]}}])}),t._v(" "),a("el-table-column",{attrs:{property:"address",label:"入库人员",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(e.row.operator))])]}}])}),t._v(" "),a("el-table-column",{attrs:{property:"address",label:"入库时间",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(e.row.time))])]}}])}),t._v(" "),a("el-table-column",{attrs:{property:"address",label:"商品名称",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(e.row.item_name))])]}}])}),t._v(" "),a("el-table-column",{attrs:{property:"address",label:"采购数量",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(e.row.c_num))])]}}])}),t._v(" "),a("el-table-column",{attrs:{property:"address",label:"入库数量",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(e.row.num))])]}}])})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.shopVisible=!1}}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"商品入库",visible:t.wareVisible,"show-close":""},on:{"update:visible":function(e){t.wareVisible=e}}},[a("el-card",{staticClass:"box-card",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("采购信息")])]),t._v(" "),a("div",{staticClass:"info"},[a("p",[a("span",{staticClass:"title"},[t._v("采购单号")]),t._v("\n          "+t._s(t.wareObj.sn)+"\n        ")]),t._v(" "),a("p",[a("span",{staticClass:"title"},[t._v("供应商")]),t._v("\n          "+t._s(t.wareObj.supplier_name)+"\n        ")]),t._v(" "),a("p",[a("span",{staticClass:"title"},[t._v("采购人")]),t._v("\n          "+t._s(t.wareObj.purchase_admin_name)+"\n        ")]),t._v(" "),a("p",[a("span",{staticClass:"title"},[t._v("采购时间")]),t._v("\n          "+t._s(t.wareObj.create_time)+"\n        ")]),t._v(" "),a("p",[a("span",{staticClass:"title"},[t._v("备注")]),t._v("\n          "+t._s(t.wareObj.remark)+"\n        ")])])]),t._v(" "),a("el-card",{staticClass:"box-card",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("商品入库")])]),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],attrs:{data:t.wareList,border:"","header-cell-style":{backgroundColor:"#F5F7FA"},"element-loading-text":"Loading",stripe:""}},[a("el-table-column",{attrs:{property:"item_id",label:"序号",width:"70",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{property:"item_name",label:"商品名称",width:"250",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{property:"item_code",label:"条形码",width:"250",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{property:"num",label:"采购数量",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{property:"s_num",label:"已入库数量",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"入库数量",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("input",{directives:[{name:"model",rawName:"v-model",value:e.row.r_num,expression:"props.row.r_num"}],staticClass:"input",attrs:{placeholder:"入库数量"},domProps:{value:e.row.r_num},on:{input:function(a){a.target.composing||t.$set(e.row,"r_num",a.target.value)}}})]}}])})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.wareVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.add}},[t._v("确 定")])],1)],1)],1)},s=[],i=(a("6d57"),a("f573")),r=a("2934"),o=a("ed08"),l=(a("ecc0"),a("2f51"),a("e926")),c={data:function(){return{list:null,remark:null,record:{},purchaseList:[],warehouseList:[],shopList:[],wareList:[],wareObj:{},jsonList:[{cg_amount:null,remarks:null,s_num:null,item_name:null,item_code:null,attr_ids:null,attr_name:null}],checkedSpecs:[],reqData:{page:1,limit:5},total:0,sub:0,shopData:{page:1,limit:5,item_type:null,item_name:null,bar_code:null,not_ids:[]},arr:[],chooseShop:[],chooseId:[],count1:null,currentPage:1,count2:null,currentPage2:1,listLoading:!1,dialogTableVisible:!1,innerVisible:!1,shopVisible:!1,wareVisible:!1,supplier:[],value1:null,chooseOption:[{value:"1",label:"线上商城"},{value:"2",label:"门店商品"}],time1:[]}},created:function(){this._getPurcase(),this._getSupplier()},components:{ChoosesGoods:l["a"]},methods:{_getPurcase:function(){var t=this;this.listLoading=!0;var e=this.reqData;Object(i["e"])(e).then((function(e){200==e.code&&(t.list=e.data,t.count1=e.count,t.listLoading=!1)}))},_getSupplier:function(){var t=this;Object(r["e"])().then((function(e){t.supplier=e.data}))},_getShop:function(){var t=this;console.log(this.shopData),Object(r["d"])(this.shopData).then((function(e){200==e.code&&(t.shopList=e.data,t.count2=e.count,console.log(t.shopList))}))},submit:function(){console.log(this.chooseShop)},handleTotal:function(t){var e=this;console.log(t),this.$nextTick((function(){var a=0,n=0;e.chooseShop.forEach((function(t){a+=t.num*t.price})),n=e.chooseShop[t].num*e.chooseShop[t].price,a!=e.total&&(e.sub=a,e.chooseShop[t].total=n)}))},handleSelectionChange:function(t){console.log(t),t.forEach((function(t){t.num=null,t.price=null,t.total=null})),this.arr=t},handleCheckedCitiesChange:function(t){var e=t.length;this.checkAll=e===this.cities.length,this.isIndeterminate=e>0&&e<this.cities.length},handleCheckAllChange:function(t){this.checkedCities=t?cityOptions:[],this.isIndeterminate=!1},guanbi:function(){this.shopData.not_ids=[],this.shopData.item_name=null,this.shopData.bar_code=null},insertClose:function(){this.chooseShop=[],this.value1=null},shopConfim:function(){console.log(this.checkedSpecs)},_close:function(t){var e=this;Object(i["c"])(t).then((function(t){200==t.code?e.$message({type:"success",message:"关闭成功!"}):e.$message({type:"danger",message:"关闭失败!"})}))},_del:function(t){},_return:function(t){var e=this;Object(i["f"])(t).then((function(t){200==t.code?e.$message({type:"success",message:"反入库成功!"}):e.$message({type:"danger",message:"反入库失败!"})}))},add:function(){console.log("选择",this.wareObj);var t=[];this.wareList.forEach((function(e){var a={purchase_item_id:e.purchase_item_id,item_id:e.item_id,item_name:e.item_name,item_code:e.item_code,r_num:e.r_num,attr_ids:e.attr_ids,attr_name:e.attr_name};t.push(a)}));var e={id:this.wareObj.id,jsonlist:JSON.stringify(t)};Object(i["a"])(e).then((function(t){console.log(t)}))},handleSizeChange:function(t){this.reqData.limit=t,this._getPurcase()},handleCurrentChange:function(t){this.reqData.page=t,this._getPurcase()},handleSizeChange2:function(t){this.shopData.limit=t,this._getShop()},handleCurrentChange2:function(t){this.shopData.page=t,this._getShop()},handleRecording:function(t){var e=this;this.shopVisible=!0;var a={id:t};Object(i["i"])(a).then((function(t){e.listLoading=!0,200==t.code&&(e.record=t.data,e.purchaseList=e.record.item,e.warehouseList=e.record.item_log,e.record.create_time=Object(o["b"])(e.record.create_time),e.listLoading=!1)}))},warehouse:function(t){var e=this;console.log(t);var a={id:t};Object(i["d"])(a).then((function(t){console.log(t),200==t.code&&(e.wareObj=t.data,t.data.item.forEach((function(t){t.r_num=null})),e.wareList=t.data.item,e.wareVisible=!0)}))},search:function(){var t={page:1,supplier_id:this.value1};Object(i["e"])(t).then((function(t){console.log(t)}))},delShop:function(t){this.chooseShop.splice(t,1)},searchShop:function(){this._getShop()},insert:function(){this.innerVisible=!0},remind:function(t,e){var a,n=this;a=1==e?"关闭":2==e?"删除":"反入库",this.$confirm("此操作将".concat(a,"采购单, 是否继续?"),"提醒",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then((function(){var a={id:t};1===e?n._close(a):2===e?n._del(a):n._return(a)})).catch((function(){n.$message({type:"info",message:"已取消删除"})}))},test:function(){console.log(this.value1),""==this.value1||null==this.value1?this.$message({message:"请先选择供货商",type:"warning"}):this.innerVisible=!0}}},u=c,d=(a("3e3d"),a("d5ca"),a("5511")),p=Object(d["a"])(u,n,s,!1,null,"7657a4e0",null);e["default"]=p.exports},d5ca:function(t,e,a){"use strict";var n=a("1eba"),s=a.n(n);s.a},d836:function(t,e,a){},ddad:function(t,e,a){},e6f5:function(t,e,a){var n=a("eafa"),s=a("f160"),i=a("f6b4");t.exports=function(t,e,a,r){var o=String(i(t)),l=o.length,c=void 0===a?" ":String(a),u=n(e);if(u<=l||""==c)return o;var d=u-l,p=s.call(c,Math.ceil(d/c.length));return p.length>d&&(p=p.slice(0,d)),r?p+o:o+p}},e926:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-dialog",{attrs:{width:"55%",title:"商品选择",visible:t.show,"append-to-body":""},on:{"update:visible":function(e){t.show=e},close:t.closeDialog}},[a("el-card",{staticClass:"box-card",attrs:{shadow:"hover"}},[a("div",{staticClass:"search-box"},[a("el-input",{staticClass:"search-input with",attrs:{clearable:"",size:"small",placeholder:"商品名称"},model:{value:t.requestData.item_name,callback:function(e){t.$set(t.requestData,"item_name",e)},expression:"requestData.item_name"}}),t._v(" "),a("el-input",{staticClass:"search-input with",attrs:{clearable:"",size:"small",placeholder:"条形码"},model:{value:t.requestData.bar_code,callback:function(e){t.$set(t.requestData,"bar_code",e)},expression:"requestData.bar_code"}}),t._v(" "),a("el-radio-group",{staticStyle:{"margin-right":"20px"},model:{value:t.requestData.item_type,callback:function(e){t.$set(t.requestData,"item_type",e)},expression:"requestData.item_type"}},[a("el-radio",{attrs:{label:1,size:"medium"}},[t._v("线上商品")]),t._v(" "),a("el-radio",{attrs:{label:2,size:"medium",disabled:t.isDisabled}},[t._v("门店商品")])],1),t._v(" "),a("el-button",{staticClass:"search-input",attrs:{size:"small",icon:"el-icon-search",type:"primary"},on:{click:t.search}},[t._v("搜索")])],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.requestData.isLoad,expression:"requestData.isLoad"}],ref:"multipleTable",attrs:{data:t.responseData,border:"","header-cell-style":{backgroundColor:"#F5F7FA"},"element-loading-text":"Loading",stripe:"","max-height":"400","span-method":t.objectSpanMethod},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{label:"ID",align:"center",prop:"id"}}),t._v(" "),a("el-table-column",{attrs:{label:"商品名称",align:"center",prop:"title"}}),t._v(" "),a("el-table-column",{attrs:{label:"规格",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.specification.key_name))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"条形码",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.specification.bar_code))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"库存",align:"center",prop:"stock"}})],1),t._v(" "),a("div",{staticClass:"footer"},[a("el-pagination",{attrs:{"current-page":t.requestData.page,"page-sizes":[5,10,15,20],"page-size":t.requestData.limit,layout:"total, sizes, prev, pager, next, jumper",total:t.totalCount,"hide-on-single-page":!0},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),a("el-button",{staticStyle:{float:"right",margin:"20px"},attrs:{type:"primary",size:"small"},on:{click:t.submit}},[t._v("确定")])],1)],1)],1)},s=[],i=(a("6d57"),a("0bbb")),r=(a("63ff"),a("57f0")),o=a("2934"),l={name:"ChoosesGoods",props:{isShow:{type:Boolean,default:!1},chooeseArr:{type:Array,default:function(){return[]}},isDisabled:{type:Boolean,default:!1}},watch:{isShow:{immediate:!0,handler:function(t){console.log("我是父组件带过来的值",t),console.log("选中ID数组",this.chooeseArr),this.show=t,this.requestData.not_ids=this.chooeseArr}},show:function(t,e){t||this.$emit("update:isShow",!1)}},data:function(){return{show:!1,isLoad:!1,requestData:{page:1,limit:5,item_type:1,item_name:"",brand_id:"",bar_code:"",shop_id:"",stock:"",not_ids:[]},multipleSelection:[],spanArr:[],position:0,totalCount:0,responseData:[]}},created:function(){},methods:{closeDialog:function(){this.show=!1,this.responseData=[],this.requestData={page:1,limit:5,item_type:1,item_name:"",brand_id:"",bar_code:"",shop_id:"",stock:"",not_ids:[]}},search:function(){this.requestData.page=1,this.loadData()},handleCurrentChange:function(t){this.requestData.page=t,this.loadData()},handleSizeChange:function(t){this.requestData.limit=t,this.loadData()},loadData:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.totalCount=0,this.responseData=[],this.spanArr=[],this.position=0,this.isLoad=!0,t.next=7,Object(o["d"])(this.requestData).then((function(t){if(200===t.code){e.totalCount=t.count;var a=[],n=[];t.data.map((function(t){n=[],t.specs.map((function(e){n.push(Object.assign({specification:e},t))})),a.push.apply(a,Object(i["a"])(n))})),e.responseData=a,e.rowspan(),console.log("处理数据结构后：",a)}e.isLoad=!1})).catch((function(t){e.isLoad=!1,console.log(t)}));case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),rowspan:function(){var t=this;this.responseData.forEach((function(e,a){0===a?(t.spanArr.push(1),t.position=0):t.responseData[a].id===t.responseData[a-1].id?(t.spanArr[t.position]+=1,t.spanArr.push(0)):(t.spanArr.push(1),t.position=a)}))},objectSpanMethod:function(t){t.row,t.column;var e=t.rowIndex,a=t.columnIndex;if(1===a){var n=this.spanArr[e],s=n>0?1:0;return{rowspan:n,colspan:s}}if(2===a){var i=this.spanArr[e],r=i>0?1:0;return{rowspan:i,colspan:r}}},handleSelectionChange:function(t){this.multipleSelection=t,console.log(t)},submit:function(){this.$emit("submit",this.multipleSelection),this.show=!1,this.responseData=[]}}},c=l,u=(a("b8a4"),a("5511")),d=Object(u["a"])(c,n,s,!1,null,"e6a9457e",null);e["a"]=d.exports},ed08:function(t,e,a){"use strict";a.d(e,"b",(function(){return s})),a.d(e,"a",(function(){return i}));a("e10e"),a("6d57"),a("9a33"),a("70da"),a("f548"),a("2b45");var n=a("3bf2");function s(t,e){if(0===arguments.length)return null;var a,s=e||"{y}-{m}-{d} {h}:{i}:{s}";"object"===Object(n["a"])(t)?a=t:("string"===typeof t&&/^[0-9]+$/.test(t)&&(t=parseInt(t)),"number"===typeof t&&10===t.toString().length&&(t*=1e3),a=new Date(t));var i={y:a.getFullYear(),m:a.getMonth()+1,d:a.getDate(),h:a.getHours(),i:a.getMinutes(),s:a.getSeconds(),a:a.getDay()},r=s.replace(/{([ymdhisa])+}/g,(function(t,e){var a=i[e];return"a"===e?["日","一","二","三","四","五","六"][a]:a.toString().padStart(2,"0")}));return r}function i(t){if(!t&&"object"!==Object(n["a"])(t))throw new Error("error arguments","deepClone");var e=t.constructor===Array?[]:{};return Object.keys(t).forEach((function(a){t[a]&&"object"===Object(n["a"])(t[a])?e[a]=i(t[a]):e[a]=t[a]})),e}},f160:function(t,e,a){"use strict";var n=a("ee21"),s=a("f6b4");t.exports=function(t){var e=String(s(this)),a="",i=n(t);if(i<0||i==1/0)throw RangeError("Count can't be negative");for(;i>0;(i>>>=1)&&(e+=e))1&i&&(a+=e);return a}},f573:function(t,e,a){"use strict";a.d(e,"e",(function(){return s})),a.d(e,"c",(function(){return i})),a.d(e,"i",(function(){return r})),a.d(e,"f",(function(){return o})),a.d(e,"d",(function(){return l})),a.d(e,"a",(function(){return c})),a.d(e,"h",(function(){return u})),a.d(e,"g",(function(){return d})),a.d(e,"b",(function(){return p}));var n=a("b775");function s(t){return Object(n["a"])({url:"/stock/purchase/getList",method:"get",params:t})}function i(t){return Object(n["a"])({url:"/stock/Purchase/purchase_close",method:"get",params:t})}function r(t){return Object(n["a"])({url:"/stock/Purchase/store_item",method:"get",params:t})}function o(t){return Object(n["a"])({url:"/stock/Purchase/refund_storage",method:"get",params:t})}function l(t){return Object(n["a"])({url:"/stock/Purchase/findId",method:"post",data:t})}function c(t){return Object(n["a"])({url:"/stock/Purchase/storage_item",method:"post",data:t})}function u(t){return Object(n["a"])({url:"/stock/PurDeliver/get_list",method:"post",data:t})}function d(t){return Object(n["a"])({url:"/stock/PurDeliver/transfer",method:"post",data:t})}function p(t){return Object(n["a"])({url:"/stock/PurDeliver/add",method:"post",data:t})}}}]);